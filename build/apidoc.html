<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/ParsePlatform/parse-server#readme"

    >parse-server (v2.3.7)</a>
</h1>
<h4>An express module providing a Parse-compatible API server</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server">module parse-server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>FileSystemAdapter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.GCSAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>GCSAdapter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.InMemoryCacheAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>InMemoryCacheAdapter
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.NullCacheAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>NullCacheAdapter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ParseServer">
            function <span class="apidocSignatureSpan">parse-server.</span>ParseServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.PushWorker">
            function <span class="apidocSignatureSpan">parse-server.</span>PushWorker
            <span class="apidocSignatureSpan">(pushAdapter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RedisCacheAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>RedisCacheAdapter
            <span class="apidocSignatureSpan">(redisCtx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery">
            function <span class="apidocSignatureSpan">parse-server.</span>RestQuery
            <span class="apidocSignatureSpan">(config, auth, className)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite">
            function <span class="apidocSignatureSpan">parse-server.</span>RestWrite
            <span class="apidocSignatureSpan">(config, auth, className, query, data, originalData, clientSDK)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter">
            function <span class="apidocSignatureSpan">parse-server.</span>S3Adapter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.default">
            function <span class="apidocSignatureSpan">parse-server.</span>default
            <span class="apidocSignatureSpan">(_ref)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>AccountLockout</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>Auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>ClientSDK</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>FileSystemAdapter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>ParseServerRESTController</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>PromiseRouter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>RestQuery.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>RestWrite.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>S3Adapter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>StatusHandler</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>TestUtils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>batch</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>cryptoUtils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>deprecated</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>logger</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>middlewares</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>password</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>requiredParameter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>rest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.</span>triggers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.AccountLockout">module parse-server.AccountLockout</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.AccountLockout.AccountLockout">
            function <span class="apidocSignatureSpan">parse-server.</span>AccountLockout
            <span class="apidocSignatureSpan">(user, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.AccountLockout.default">
            function <span class="apidocSignatureSpan">parse-server.AccountLockout.</span>default
            <span class="apidocSignatureSpan">(user, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.Auth">module parse-server.Auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.Auth.Auth">
            function <span class="apidocSignatureSpan">parse-server.</span>Auth
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.Auth.getAuthForLegacySessionToken">
            function <span class="apidocSignatureSpan">parse-server.Auth.</span>getAuthForLegacySessionToken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.Auth.getAuthForSessionToken">
            function <span class="apidocSignatureSpan">parse-server.Auth.</span>getAuthForSessionToken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.Auth.master">
            function <span class="apidocSignatureSpan">parse-server.Auth.</span>master
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.Auth.nobody">
            function <span class="apidocSignatureSpan">parse-server.Auth.</span>nobody
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.ClientSDK">module parse-server.ClientSDK</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ClientSDK.compatible">
            function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>compatible
            <span class="apidocSignatureSpan">(compatibleSDK)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ClientSDK.fromString">
            function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>fromString
            <span class="apidocSignatureSpan">(version)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ClientSDK.supportsForwardDelete">
            function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>supportsForwardDelete
            <span class="apidocSignatureSpan">(clientSDK)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.FileSystemAdapter">module parse-server.FileSystemAdapter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.FileSystemAdapter">
            function <span class="apidocSignatureSpan">parse-server.</span>FileSystemAdapter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.default">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.</span>default
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.FileSystemAdapter.prototype">module parse-server.FileSystemAdapter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype._applicationDirExist">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_applicationDirExist
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype._getApplicationDir">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_getApplicationDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype._getLocalFilePath">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_getLocalFilePath
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype._mkdir">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_mkdir
            <span class="apidocSignatureSpan">(dirPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype.createFile">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>createFile
            <span class="apidocSignatureSpan">(filename, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype.deleteFile">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>deleteFile
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype.getFileData">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>getFileData
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.FileSystemAdapter.prototype.getFileLocation">
            function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>getFileLocation
            <span class="apidocSignatureSpan">(config, filename)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.ParseServer">module parse-server.ParseServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ParseServer.ParseServer">
            function <span class="apidocSignatureSpan">parse-server.</span>ParseServer
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ParseServer.createLiveQueryServer">
            function <span class="apidocSignatureSpan">parse-server.ParseServer.</span>createLiveQueryServer
            <span class="apidocSignatureSpan">(httpServer, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.ParseServerRESTController">module parse-server.ParseServerRESTController</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ParseServerRESTController.ParseServerRESTController">
            function <span class="apidocSignatureSpan">parse-server.</span>ParseServerRESTController
            <span class="apidocSignatureSpan">(applicationId, router)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.ParseServerRESTController.default">
            function <span class="apidocSignatureSpan">parse-server.ParseServerRESTController.</span>default
            <span class="apidocSignatureSpan">(applicationId, router)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.PromiseRouter">module parse-server.PromiseRouter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.PromiseRouter.default">
            function <span class="apidocSignatureSpan">parse-server.PromiseRouter.</span>default
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.RestQuery">module parse-server.RestQuery</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.RestQuery">
            function <span class="apidocSignatureSpan">parse-server.</span>RestQuery
            <span class="apidocSignatureSpan">(config, auth, className)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.RestQuery.prototype">module parse-server.RestQuery.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.buildRestWhere">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>buildRestWhere
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.execute">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>execute
            <span class="apidocSignatureSpan">(executeOptions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.getUserAndRoleACL">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>getUserAndRoleACL
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.handleInclude">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>handleInclude
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.redirectClassNameForKey">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>redirectClassNameForKey
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.replaceDontSelect">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceDontSelect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.replaceInQuery">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceInQuery
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.replaceNotInQuery">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceNotInQuery
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.replaceSelect">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceSelect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.runAfterFindTrigger">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runAfterFindTrigger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.runCount">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runCount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.runFind">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runFind
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestQuery.prototype.validateClientClassCreation">
            function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>validateClientClassCreation
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.RestWrite">module parse-server.RestWrite</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.RestWrite">
            function <span class="apidocSignatureSpan">parse-server.</span>RestWrite
            <span class="apidocSignatureSpan">(config, auth, className, query, data, originalData, clientSDK)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.RestWrite.prototype">module parse-server.RestWrite.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._updateResponseWithData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_updateResponseWithData
            <span class="apidocSignatureSpan">(response, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._validateEmail">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validateEmail
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordHistory">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordHistory
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordPolicy">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordPolicy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordRequirements">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordRequirements
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype._validateUserName">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validateUserName
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.cleanUserAuthData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>cleanUserAuthData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.createSessionToken">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>createSessionToken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.createSessionTokenIfNeeded">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>createSessionTokenIfNeeded
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.execute">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>execute
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.expandFilesForExistingObjects">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>expandFilesForExistingObjects
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.findUsersWithAuthData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>findUsersWithAuthData
            <span class="apidocSignatureSpan">(authData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.getUserAndRoleACL">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>getUserAndRoleACL
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.handleAuthData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleAuthData
            <span class="apidocSignatureSpan">(authData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.handleAuthDataValidation">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleAuthDataValidation
            <span class="apidocSignatureSpan">(authData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.handleFollowup">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleFollowup
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.handleInstallation">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleInstallation
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.handleSession">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleSession
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.location">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>location
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.objectId">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>objectId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.runAfterTrigger">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runAfterTrigger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.runBeforeTrigger">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runBeforeTrigger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.runDatabaseOperation">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runDatabaseOperation
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.sanitizedData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>sanitizedData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.setRequiredFieldsIfNeeded">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>setRequiredFieldsIfNeeded
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.transformUser">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>transformUser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.validateAuthData">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateAuthData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.validateClientClassCreation">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateClientClassCreation
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.RestWrite.prototype.validateSchema">
            function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateSchema
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.S3Adapter">module parse-server.S3Adapter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.S3Adapter">
            function <span class="apidocSignatureSpan">parse-server.</span>S3Adapter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.default">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.</span>default
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.S3Adapter.prototype">module parse-server.S3Adapter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.prototype.createBucket">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>createBucket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.prototype.createFile">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>createFile
            <span class="apidocSignatureSpan">(filename, data, contentType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.prototype.deleteFile">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>deleteFile
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.prototype.getFileData">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>getFileData
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.S3Adapter.prototype.getFileLocation">
            function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>getFileLocation
            <span class="apidocSignatureSpan">(config, filename)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.StatusHandler">module parse-server.StatusHandler</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.StatusHandler.flatten">
            function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>flatten
            <span class="apidocSignatureSpan">(array)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.StatusHandler.jobStatusHandler">
            function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>jobStatusHandler
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.StatusHandler.pushStatusHandler">
            function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>pushStatusHandler
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.TestUtils">module parse-server.TestUtils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.TestUtils.destroyAllDataPermanently">
            function <span class="apidocSignatureSpan">parse-server.TestUtils.</span>destroyAllDataPermanently
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.batch">module parse-server.batch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.batch.makeBatchRoutingPathFunction">
            function <span class="apidocSignatureSpan">parse-server.batch.</span>makeBatchRoutingPathFunction
            <span class="apidocSignatureSpan">(originalUrl, serverURL, publicServerURL)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.batch.mountOnto">
            function <span class="apidocSignatureSpan">parse-server.batch.</span>mountOnto
            <span class="apidocSignatureSpan">(router)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.cryptoUtils">module parse-server.cryptoUtils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.cryptoUtils.md5Hash">
            function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>md5Hash
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.cryptoUtils.newObjectId">
            function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>newObjectId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.cryptoUtils.newToken">
            function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>newToken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.cryptoUtils.randomHexString">
            function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>randomHexString
            <span class="apidocSignatureSpan">(size)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.cryptoUtils.randomString">
            function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>randomString
            <span class="apidocSignatureSpan">(size)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.deprecated">module parse-server.deprecated</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.deprecated.useExternal">
            function <span class="apidocSignatureSpan">parse-server.deprecated.</span>useExternal
            <span class="apidocSignatureSpan">(name, moduleName)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.logger">module parse-server.logger</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.logger.getLogger">
            function <span class="apidocSignatureSpan">parse-server.logger.</span>getLogger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.logger.setLogger">
            function <span class="apidocSignatureSpan">parse-server.logger.</span>setLogger
            <span class="apidocSignatureSpan">(aLogger)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.middlewares">module parse-server.middlewares</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.allowCrossDomain">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>allowCrossDomain
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.allowMethodOverride">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>allowMethodOverride
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.enforceMasterKeyAccess">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>enforceMasterKeyAccess
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.handleParseErrors">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>handleParseErrors
            <span class="apidocSignatureSpan">(err, req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.handleParseHeaders">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>handleParseHeaders
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.middlewares.promiseEnforceMasterKeyAccess">
            function <span class="apidocSignatureSpan">parse-server.middlewares.</span>promiseEnforceMasterKeyAccess
            <span class="apidocSignatureSpan">(request)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.password">module parse-server.password</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.password.compare">
            function <span class="apidocSignatureSpan">parse-server.password.</span>compare
            <span class="apidocSignatureSpan">(password, hashedPassword)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.password.hash">
            function <span class="apidocSignatureSpan">parse-server.password.</span>hash
            <span class="apidocSignatureSpan">(password)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.requiredParameter">module parse-server.requiredParameter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.requiredParameter.default">
            function <span class="apidocSignatureSpan">parse-server.requiredParameter.</span>default
            <span class="apidocSignatureSpan">(errorMessage)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.rest">module parse-server.rest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.rest.create">
            function <span class="apidocSignatureSpan">parse-server.rest.</span>create
            <span class="apidocSignatureSpan">(config, auth, className, restObject, clientSDK)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.rest.del">
            function <span class="apidocSignatureSpan">parse-server.rest.</span>del
            <span class="apidocSignatureSpan">(config, auth, className, objectId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.rest.find">
            function <span class="apidocSignatureSpan">parse-server.rest.</span>find
            <span class="apidocSignatureSpan">(config, auth, className, restWhere, restOptions, clientSDK)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.rest.get">
            function <span class="apidocSignatureSpan">parse-server.rest.</span>get
            <span class="apidocSignatureSpan">(config, auth, className, objectId, restOptions, clientSDK)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.rest.update">
            function <span class="apidocSignatureSpan">parse-server.rest.</span>update
            <span class="apidocSignatureSpan">(config, auth, className, objectId, restObject, clientSDK)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-server.triggers">module parse-server.triggers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers._unregister">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>_unregister
            <span class="apidocSignatureSpan">(appId, category, className, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers._unregisterAll">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>_unregisterAll
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.addFunction">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>addFunction
            <span class="apidocSignatureSpan">(functionName, handler, validationHandler, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.addJob">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>addJob
            <span class="apidocSignatureSpan">(jobName, handler, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.addTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>addTrigger
            <span class="apidocSignatureSpan">(type, className, handler, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getFunction">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getFunction
            <span class="apidocSignatureSpan">(functionName, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getJob">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getJob
            <span class="apidocSignatureSpan">(jobName, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getJobs">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getJobs
            <span class="apidocSignatureSpan">(applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getRequestObject">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getRequestObject
            <span class="apidocSignatureSpan">(triggerType, auth, parseObject, originalParseObject, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getRequestQueryObject">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getRequestQueryObject
            <span class="apidocSignatureSpan">(triggerType, auth, query, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getResponseObject">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getResponseObject
            <span class="apidocSignatureSpan">(request, resolve, reject)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getTrigger
            <span class="apidocSignatureSpan">(className, triggerType, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.getValidator">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>getValidator
            <span class="apidocSignatureSpan">(functionName, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.inflate">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>inflate
            <span class="apidocSignatureSpan">(data, restObject)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.maybeRunAfterFindTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunAfterFindTrigger
            <span class="apidocSignatureSpan">(triggerType, auth, className, objects, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.maybeRunQueryTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunQueryTrigger
            <span class="apidocSignatureSpan">(triggerType, className, restWhere, restOptions, config, auth)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.maybeRunTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunTrigger
            <span class="apidocSignatureSpan">(triggerType, auth, parseObject, originalParseObject, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.removeFunction">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeFunction
            <span class="apidocSignatureSpan">(functionName, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.removeJob">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeJob
            <span class="apidocSignatureSpan">(jobName, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.removeTrigger">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeTrigger
            <span class="apidocSignatureSpan">(type, className, applicationId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-server.triggers.triggerExists">
            function <span class="apidocSignatureSpan">parse-server.triggers.</span>triggerExists
            <span class="apidocSignatureSpan">(className, type, applicationId)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">parse-server.triggers.</span>Types</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server" id="apidoc.module.parse-server">module parse-server</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter" id="apidoc.element.parse-server.FileSystemAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>FileSystemAdapter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FileSystemAdapter(options) {
  options = options || {};
  let filesSubDirectory = options.filesSubDirectory || &#x27;&#x27;;
  this._filesDir = filesSubDirectory;
  this._mkdir(this._getApplicationDir());
  if (!this._applicationDirExist()) {
    throw &#x22;Files directory doesn&#x27;t exist.&#x22;;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.GCSAdapter" id="apidoc.element.parse-server.GCSAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>GCSAdapter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">GCSAdapter = function () {
  throw name + &#x22; is not provided by parse-server anymore; please install &#x22; + moduleName;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.InMemoryCacheAdapter" id="apidoc.element.parse-server.InMemoryCacheAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>InMemoryCacheAdapter
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function InMemoryCacheAdapter(ctx) {
  _classCallCheck(this, InMemoryCacheAdapter);

  this.cache = new _InMemoryCache.InMemoryCache(ctx);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.NullCacheAdapter" id="apidoc.element.parse-server.NullCacheAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>NullCacheAdapter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NullCacheAdapter() {
  _classCallCheck(this, NullCacheAdapter);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.ParseServer" id="apidoc.element.parse-server.ParseServer">
        function <span class="apidocSignatureSpan">parse-server.</span>ParseServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _ParseServer(options) {
  var server = new _ParseServer3.default(options);
  return server.app;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.PushWorker" id="apidoc.element.parse-server.PushWorker">
        function <span class="apidocSignatureSpan">parse-server.</span>PushWorker
        <span class="apidocSignatureSpan">(pushAdapter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PushWorker(pushAdapter) {
  var _this = this;

  var subscriberConfig = arguments.length &#x3e; 1 &#x26;&#x26; arguments[1] !== undefined ? arguments[1] : {};

  _classCallCheck(this, PushWorker);

  _AdaptableController2.default.validateAdapter(pushAdapter, this, _PushAdapter.PushAdapter);
  this.adapter = pushAdapter;

  this.channel = subscriberConfig.channel || _PushQueue.PushQueue.defaultPushChannel();
  this.subscriber = _ParseMessageQueue.ParseMessageQueue.createSubscriber(subscriberConfig);
  if (this.subscriber) {
    var subscriber = this.subscriber;
    subscriber.subscribe(this.channel);
    subscriber.on(&#x27;message&#x27;, function (channel, messageStr) {
      var workItem = JSON.parse(messageStr);
      _this.run(workItem);
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var disablePushWorker = pushQueueOptions.disablePushWorker;


var pushControllerQueue = new _PushQueue.PushQueue(pushQueueOptions);
var pushWorker = void 0;
if (!disablePushWorker) {
  pushWorker = new _PushWorker.<span class="apidocCodeKeywordSpan">PushWorker</span>(pushAdapter, pushQueueOptions);
}

var emailControllerAdapter = (0, _AdapterLoader.loadAdapter)(emailAdapter);
var userController = new _UserController.UserController(emailControllerAdapter, appId, { verifyUserEmails: verifyUserEmails });

var cacheControllerAdapter = (0, _AdapterLoader.loadAdapter)(cacheAdapter, _InMemoryCacheAdapter.InMemoryCacheAdapter, { appId:
appId });
var cacheController = new _CacheController.CacheController(cacheControllerAdapter, appId);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RedisCacheAdapter" id="apidoc.element.parse-server.RedisCacheAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>RedisCacheAdapter
        <span class="apidocSignatureSpan">(redisCtx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RedisCacheAdapter(redisCtx) {
  var ttl = arguments.length &#x3e; 1 &#x26;&#x26; arguments[1] !== undefined ? arguments[1] : DEFAULT_REDIS_TTL;

  _classCallCheck(this, RedisCacheAdapter);

  this.client = _redis2.default.createClient(redisCtx);
  this.p = Promise.resolve();
  this.ttl = ttl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery" id="apidoc.element.parse-server.RestQuery">
        function <span class="apidocSignatureSpan">parse-server.</span>RestQuery
        <span class="apidocSignatureSpan">(config, auth, className)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RestQuery(config, auth, className) {
  var restWhere = arguments.length &#x3e; 3 &#x26;&#x26; arguments[3] !== undefined ? arguments[3] : {};
  var restOptions = arguments.length &#x3e; 4 &#x26;&#x26; arguments[4] !== undefined ? arguments[4] : {};
  var clientSDK = arguments[5];


  this.config = config;
  this.auth = auth;
  this.className = className;
  this.restWhere = restWhere;
  this.restOptions = restOptions;
  this.clientSDK = clientSDK;
  this.response = null;
  this.findOptions = {};
  if (!this.auth.isMaster) {
    this.findOptions.acl = this.auth.user ? [this.auth.user.id] : null;
    if (this.className == &#x27;_Session&#x27;) {
      if (!this.findOptions.acl) {
        throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;This session token is invalid.&#x27;);
      }
      this.restWhere = {
        &#x27;$and&#x27;: [this.restWhere, {
          &#x27;user&#x27;: {
            __type: &#x27;Pointer&#x27;,
            className: &#x27;_User&#x27;,
            objectId: this.auth.user.id
          }
        }]
      };
    }
  }

  this.doCount = false;

  // The format for this.include is not the same as the format for the
  // include option - it&#x27;s the paths we should include, in order,
  // stored as arrays, taking into account that we need to include foo
  // before including foo.bar. Also it should dedupe.
  // For example, passing an arg of include=foo.bar,foo.baz could lead to
  // this.include = [[&#x27;foo&#x27;], [&#x27;foo&#x27;, &#x27;baz&#x27;], [&#x27;foo&#x27;, &#x27;bar&#x27;]]
  this.include = [];

  // If we have keys, we probably want to force some includes (n-1 level)
  // See issue: https://github.com/ParsePlatform/parse-server/issues/3185
  if (restOptions.hasOwnProperty(&#x27;keys&#x27;)) {
    var keysForInclude = restOptions.keys.split(&#x27;,&#x27;).filter(function (key) {
      // At least 2 components
      return key.split(&#x22;.&#x22;).length &#x3e; 1;
    }).map(function (key) {
      // Slice the last component (a.b.c -&#x3e; a.b)
      // Otherwise we&#x27;ll include one level too much.
      return key.slice(0, key.lastIndexOf(&#x22;.&#x22;));
    }).join(&#x27;,&#x27;);

    // Concat the possibly present include string with the one from the keys
    // Dedup / sorting is handle in &#x27;include&#x27; case.
    if (keysForInclude.length &#x3e; 0) {
      if (!restOptions.include || restOptions.include.length == 0) {
        restOptions.include = keysForInclude;
      } else {
        restOptions.include += &#x22;,&#x22; + keysForInclude;
      }
    }
  }

  for (var option in restOptions) {
    switch (option) {
      case &#x27;keys&#x27;:
        {
          var keys = restOptions.keys.split(&#x27;,&#x27;).concat(AlwaysSelectedKeys);
          this.keys = Array.from(new Set(keys));
          break;
        }
      case &#x27;count&#x27;:
        this.doCount = true;
        break;
      case &#x27;skip&#x27;:
      case &#x27;limit&#x27;:
        this.findOptions[option] = restOptions[option];
        break;
      case &#x27;order&#x27;:
        var fields = restOptions.order.split(&#x27;,&#x27;);
        this.findOptions.sort = fields.reduce(function (sortMap, field) {
          field = field.trim();
          if (field[0] == &#x27;-&#x27;) {
            sortMap[field.slice(1)] = -1;
          } else {
            sortMap[field] = 1;
          }
          return sortMap;
        }, {});
        break;
      case &#x27;include&#x27;:
        {
          var paths = restOptions.include.split(&#x27;,&#x27;);
          // Load the existing includes (from keys)
          var pathSet = paths.reduce(function (memo, path) {
            // Split each paths on . (a.b.c -&#x3e; [a,b,c])
            // reduce to create all paths
            // ([a,b,c] -&#x3e; {a: true, &#x27;a.b&#x27;: true, &#x27;a.b.c&#x27;: true})
            return path.split(&#x27;.&#x27;).reduce(function (memo, path, index, parts) {
              memo[parts.slice(0, index + 1).join(&#x27;.&#x27;)] = true;
              return memo;
            }, memo);
          }, {});

          this.include = Object.keys(pathSet).map(function (s) {
            return s.split(&#x27;.&#x27;);
          }).sort(function (a, b) {
            return a.length - b.length; // Sort by number of components
          });
          break;
        }
      case &#x27;redirectClassNameForKey&#x27;:
        this.redirectKey = restOptions.redirectClassNameForKey;
        this.redirectClassName = null; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite" id="apidoc.element.parse-server.RestWrite">
        function <span class="apidocSignatureSpan">parse-server.</span>RestWrite
        <span class="apidocSignatureSpan">(config, auth, className, query, data, originalData, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RestWrite(config, auth, className, query, data, originalData, clientSDK) {
  this.config = config;
  this.auth = auth;
  this.className = className;
  this.clientSDK = clientSDK;
  this.storage = {};
  this.runOptions = {};
  if (!query &#x26;&#x26; data.objectId) {
    throw new Parse.Error(Parse.Error.INVALID_KEY_NAME, &#x27;objectId is an invalid field name.&#x27;);
  }

  // When the operation is complete, this.response may have several
  // fields.
  // response: the actual data to be returned
  // status: the http status code. if not present, treated like a 200
  // location: the location header. if not present, no location header
  this.response = null;

  // Processing this operation may mutate our data, so we operate on a
  // copy
  this.query = deepcopy(query);
  this.data = deepcopy(data);
  // We never change originalData, so we do not need a deep copy
  this.originalData = originalData;

  // The timestamp we&#x27;ll use for this whole operation
  this.updatedAt = Parse._encode(new Date()).iso;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter" id="apidoc.element.parse-server.S3Adapter">
        function <span class="apidocSignatureSpan">parse-server.</span>S3Adapter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function S3Adapter() {
  var options = optionsFromArguments(arguments);
  this._region = options.region;
  this._bucket = options.bucket;
  this._bucketPrefix = options.bucketPrefix;
  this._directAccess = options.directAccess;
  this._baseUrl = options.baseUrl;
  this._baseUrlDirect = options.baseUrlDirect;
  this._signatureVersion = options.signatureVersion;
  this._globalCacheControl = options.globalCacheControl;

  let s3Options = {
    params: { Bucket: this._bucket },
    region: this._region,
    signatureVersion: this._signatureVersion,
    globalCacheControl: this._globalCacheControl
  };

  if (options.accessKey &#x26;&#x26; options.secretKey) {
    s3Options.accessKeyId = options.accessKey;
    s3Options.secretAccessKey = options.secretKey;
  }

  Object.assign(s3Options, options.s3overrides);

  this._s3Client = new AWS.S3(s3Options);
  this._hasBucket = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.default" id="apidoc.element.parse-server.default">
        function <span class="apidocSignatureSpan">parse-server.</span>default
        <span class="apidocSignatureSpan">(_ref)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ParseServer(_ref) {
  var _ref$appId = _ref.appId,
      appId = _ref$appId === undefined ? (0, _requiredParameter2.default)(&#x27;You must provide an appId!&#x27;) : _ref$appId,
      _ref$masterKey = _ref.masterKey,
      masterKey = _ref$masterKey === undefined ? (0, _requiredParameter2.default)(&#x27;You must provide a masterKey!&#x27;) : _ref$masterKey
,
      appName = _ref.appName,
      analyticsAdapter = _ref.analyticsAdapter,
      filesAdapter = _ref.filesAdapter,
      push = _ref.push,
      loggerAdapter = _ref.loggerAdapter,
      _ref$jsonLogs = _ref.jsonLogs,
      jsonLogs = _ref$jsonLogs === undefined ? _defaults2.default.jsonLogs : _ref$jsonLogs,
      _ref$logsFolder = _ref.logsFolder,
      logsFolder = _ref$logsFolder === undefined ? _defaults2.default.logsFolder : _ref$logsFolder,
      _ref$verbose = _ref.verbose,
      verbose = _ref$verbose === undefined ? _defaults2.default.verbose : _ref$verbose,
      _ref$logLevel = _ref.logLevel,
      logLevel = _ref$logLevel === undefined ? _defaults2.default.level : _ref$logLevel,
      _ref$silent = _ref.silent,
      silent = _ref$silent === undefined ? _defaults2.default.silent : _ref$silent,
      _ref$databaseURI = _ref.databaseURI,
      databaseURI = _ref$databaseURI === undefined ? _defaults2.default.DefaultMongoURI : _ref$databaseURI,
      databaseOptions = _ref.databaseOptions,
      databaseAdapter = _ref.databaseAdapter,
      cloud = _ref.cloud,
      _ref$collectionPrefix = _ref.collectionPrefix,
      collectionPrefix = _ref$collectionPrefix === undefined ? &#x27;&#x27; : _ref$collectionPrefix,
      clientKey = _ref.clientKey,
      javascriptKey = _ref.javascriptKey,
      dotNetKey = _ref.dotNetKey,
      restAPIKey = _ref.restAPIKey,
      webhookKey = _ref.webhookKey,
      fileKey = _ref.fileKey,
      _ref$userSensitiveFie = _ref.userSensitiveFields,
      userSensitiveFields = _ref$userSensitiveFie === undefined ? [] : _ref$userSensitiveFie,
      _ref$enableAnonymousU = _ref.enableAnonymousUsers,
      enableAnonymousUsers = _ref$enableAnonymousU === undefined ? _defaults2.default.enableAnonymousUsers : _ref$enableAnonymousU
,
      _ref$allowClientClass = _ref.allowClientClassCreation,
      allowClientClassCreation = _ref$allowClientClass === undefined ? _defaults2.default.allowClientClassCreation : _ref$allowClientClass
,
      _ref$oauth = _ref.oauth,
      oauth = _ref$oauth === undefined ? {} : _ref$oauth,
      _ref$auth = _ref.auth,
      auth = _ref$auth === undefined ? {} : _ref$auth,
      _ref$serverURL = _ref.serverURL,
      serverURL = _ref$serverURL === undefined ? (0, _requiredParameter2.default)(&#x27;You must provide a serverURL!&#x27;) : _ref$serverURL
,
      _ref$maxUploadSize = _ref.maxUploadSize,
      maxUploadSize = _ref$maxUploadSize === undefined ? _defaults2.default.maxUploadSize : _ref$maxUploadSize,
      _ref$verifyUserEmails = _ref.verifyUserEmails,
      verifyUserEmails = _ref$verifyUserEmails === undefined ? _defaults2.default.verifyUserEmails : _ref$verifyUserEmails,
      _ref$preventLoginWith = _ref.preventLoginWithUnverifiedEmail,
      preventLoginWithUnverifiedEmail = _ref$preventLoginWith === undefined ? _defaults2.default.preventLoginWithUnverifiedEmail
 : _ref$preventLoginWith,
      emailVerifyTokenValidityDuration = _ref.emailVerifyTokenValidityDuration,
      accountLockout = _ref.accountLockout,
      passwordPolicy = _ref.passwordPolicy,
      cacheAdapter = _ref.cacheAdapter,
      emailAdapter = _ref.emailAdapter,
      publicServerURL = _ref.publicServerURL,
      _ref$customPages = _ref.customPages,
      customPages = _ref$customPages === undefined ? {
    invalidLink: undefined,
    verifyEmailSuccess: undefined,
    choosePassword: undefined,
    passwordResetSuccess: undefined
  } : _ref$customPages,
      _ref$liveQuery = _ref.liveQuery,
      liveQuery = _ref$liveQuery === undefined ? {} : _ref$liveQuery,
      _ref$sessionLength = _ref.sessionLength,
      sessionLength = _ref$sessionLength === undefined ? _defaults2.default.sessionLength : _ref$sessionLength,
      _ref$expireInactiveSe = _ref.expi ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>










































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.AccountLockout" id="apidoc.module.parse-server.AccountLockout">module parse-server.AccountLockout</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.AccountLockout.AccountLockout" id="apidoc.element.parse-server.AccountLockout.AccountLockout">
        function <span class="apidocSignatureSpan">parse-server.</span>AccountLockout
        <span class="apidocSignatureSpan">(user, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AccountLockout(user, config) {
  _classCallCheck(this, AccountLockout);

  this._user = user;
  this._config = config;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.AccountLockout.default" id="apidoc.element.parse-server.AccountLockout.default">
        function <span class="apidocSignatureSpan">parse-server.AccountLockout.</span>default
        <span class="apidocSignatureSpan">(user, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AccountLockout(user, config) {
  _classCallCheck(this, AccountLockout);

  this._user = user;
  this._config = config;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.Auth" id="apidoc.module.parse-server.Auth">module parse-server.Auth</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.Auth.Auth" id="apidoc.element.parse-server.Auth.Auth">
        function <span class="apidocSignatureSpan">parse-server.</span>Auth
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Auth() {
  var _ref = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {},
      config = _ref.config,
      _ref$isMaster = _ref.isMaster,
      isMaster = _ref$isMaster === undefined ? false : _ref$isMaster,
      user = _ref.user,
      installationId = _ref.installationId;

  this.config = config;
  this.installationId = installationId;
  this.isMaster = isMaster;
  this.user = user;

  // Assuming a users roles won&#x27;t change during a single request, we&#x27;ll
  // only load them once.
  this.userRoles = [];
  this.fetchedRoles = false;
  this.rolePromise = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function getAuth() {
var options = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {};
var config = arguments[1];

var installationId = options.installationId || &#x27;cloud&#x27;;
if (options.useMasterKey) {
  return Parse.Promise.as(new Auth.<span class="apidocCodeKeywordSpan">Auth</span>({ config: config, isMaster: true, installationId
: installationId }));
}
return getSessionToken(options).then(function (sessionToken) {
  if (sessionToken) {
    options.sessionToken = sessionToken;
    return Auth.getAuthForSessionToken({
      config: config,
      sessionToken: sessionToken,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.Auth.getAuthForLegacySessionToken" id="apidoc.element.parse-server.Auth.getAuthForLegacySessionToken">
        function <span class="apidocSignatureSpan">parse-server.Auth.</span>getAuthForLegacySessionToken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getAuthForLegacySessionToken() {
  var _ref3 = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {},
      config = _ref3.config,
      sessionToken = _ref3.sessionToken,
      installationId = _ref3.installationId;

  var restOptions = {
    limit: 1
  };
  var query = new RestQuery(config, master(config), &#x27;_User&#x27;, { sessionToken: sessionToken }, restOptions);
  return query.execute().then(function (response) {
    var results = response.results;
    if (results.length !== 1) {
      throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;invalid legacy session token&#x27;);
    }
    var obj = results[0];
    obj.className = &#x27;_User&#x27;;
    var userObject = Parse.Object.fromJSON(obj);
    return new Auth({ config: config, isMaster: false, installationId: installationId, user: userObject });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  next();
  return;
}

return Promise.resolve().then(function () {
  // handle the upgradeToRevocableSession path on it&#x27;s own
  if (info.sessionToken &#x26;&#x26; req.url === &#x27;/upgradeToRevocableSession&#x27; &#x26;&#x26; info.sessionToken.indexOf(&#
x27;r:&#x27;) != 0) {
    return _Auth2.default.<span class="apidocCodeKeywordSpan">getAuthForLegacySessionToken</span>({ config: req.config, installationId
: info.installationId, sessionToken: info.sessionToken });
  } else {
    return _Auth2.default.getAuthForSessionToken({ config: req.config, installationId: info.installationId, sessionToken: info.sessionToken
 });
  }
}).then(function (auth) {
  if (auth) {
    req.auth = auth;
    next();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.Auth.getAuthForSessionToken" id="apidoc.element.parse-server.Auth.getAuthForSessionToken">
        function <span class="apidocSignatureSpan">parse-server.Auth.</span>getAuthForSessionToken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getAuthForSessionToken() {
  var _ref2 = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {},
      config = _ref2.config,
      sessionToken = _ref2.sessionToken,
      installationId = _ref2.installationId;

  return config.cacheController.user.get(sessionToken).then(function (userJSON) {
    if (userJSON) {
      var cachedUser = Parse.Object.fromJSON(userJSON);
      return Promise.resolve(new Auth({ config: config, isMaster: false, installationId: installationId, user: cachedUser }));
    }

    var restOptions = {
      limit: 1,
      include: &#x27;user&#x27;
    };

    var query = new RestQuery(config, master(config), &#x27;_Session&#x27;, { sessionToken: sessionToken }, restOptions);
    return query.execute().then(function (response) {
      var results = response.results;
      if (results.length !== 1 || !results[0][&#x27;user&#x27;]) {
        throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;invalid session token&#x27;);
      }

      var now = new Date(),
          expiresAt = results[0].expiresAt ? new Date(results[0].expiresAt.iso) : undefined;
      if (expiresAt &#x3c; now) {
        throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;Session token is expired.&#x27;);
      }
      var obj = results[0][&#x27;user&#x27;];
      delete obj.password;
      obj[&#x27;className&#x27;] = &#x27;_User&#x27;;
      obj[&#x27;sessionToken&#x27;] = sessionToken;
      config.cacheController.user.put(sessionToken, obj);
      var userObject = Parse.Object.fromJSON(obj);
      return new Auth({ config: config, isMaster: false, installationId: installationId, user: userObject });
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var installationId = options.installationId || &#x27;cloud&#x27;;
if (options.useMasterKey) {
  return Parse.Promise.as(new Auth.Auth({ config: config, isMaster: true, installationId: installationId }));
}
return getSessionToken(options).then(function (sessionToken) {
  if (sessionToken) {
    options.sessionToken = sessionToken;
    return Auth.<span class="apidocCodeKeywordSpan">getAuthForSessionToken</span>({
      config: config,
      sessionToken: sessionToken,
      installationId: installationId
    });
  } else {
    return Parse.Promise.as(new Auth.Auth({ config: config, installationId: installationId }));
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.Auth.master" id="apidoc.element.parse-server.Auth.master">
        function <span class="apidocSignatureSpan">parse-server.Auth.</span>master
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function master(config) {
  return new Auth({ config: config, isMaster: true });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this.className !== &#x27;_User&#x27;) {
  return promise;
}

if (this.query) {
  // If we&#x27;re updating a _User object, we need to clear out the cache for that user. Find all their
  // session tokens, and remove them from the cache.
  promise = new _RestQuery2.default(this.config, Auth.<span class="apidocCodeKeywordSpan">master</span>(this.config), &#x27;_Session
&#x27;, {
    user: {
      __type: &#x22;Pointer&#x22;,
      className: &#x22;_User&#x22;,
      objectId: this.objectId()
    }
  }).execute().then(function (results) {
    results.results.forEach(function (session) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.Auth.nobody" id="apidoc.element.parse-server.Auth.nobody">
        function <span class="apidocSignatureSpan">parse-server.Auth.</span>nobody
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function nobody(config) {
  return new Auth({ config: config, isMaster: false });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.ClientSDK" id="apidoc.module.parse-server.ClientSDK">module parse-server.ClientSDK</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.ClientSDK.compatible" id="apidoc.element.parse-server.ClientSDK.compatible">
        function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>compatible
        <span class="apidocSignatureSpan">(compatibleSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function compatible(compatibleSDK) {
  return function (clientSDK) {
    if (typeof clientSDK === &#x27;string&#x27;) {
      clientSDK = fromString(clientSDK);
    }
    // REST API, or custom SDK
    if (!clientSDK) {
      return true;
    }
    var clientVersion = clientSDK.version;
    var compatiblityVersion = compatibleSDK[clientSDK.sdk];
    return semver.satisfies(clientVersion, compatiblityVersion);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.ClientSDK.fromString" id="apidoc.element.parse-server.ClientSDK.fromString">
        function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>fromString
        <span class="apidocSignatureSpan">(version)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fromString(version) {
  var versionRE = /([-a-zA-Z]+)([0-9\.]+)/;
  var match = version.toLowerCase().match(versionRE);
  if (match &#x26;&#x26; match.length === 3) {
    return {
      sdk: match[1],
      version: match[2]
    };
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  } else {
    return invalidRequest(req, res);
  }
}

if (info.clientVersion) {
  info.clientSDK = _ClientSDK2.default.<span class="apidocCodeKeywordSpan">fromString</span>(info.clientVersion);
}

if (fileViaJSON) {
  // We need to repopulate req.body with a buffer
  var base64 = req.body.base64;
  req.body = new Buffer(base64, &#x27;base64&#x27;);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.ClientSDK.supportsForwardDelete" id="apidoc.element.parse-server.ClientSDK.supportsForwardDelete">
        function <span class="apidocSignatureSpan">parse-server.ClientSDK.</span>supportsForwardDelete
        <span class="apidocSignatureSpan">(clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function supportsForwardDelete(clientSDK) {
  return compatible({
    js: &#x27;&#x3e;=1.9.0&#x27;
  })(clientSDK);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
};

RestWrite.prototype._updateResponseWithData = function (response, data) {
  if (_lodash2.default.isEmpty(this.storage.fieldsChangedByTrigger)) {
return response;
  }
  var clientSupportsDelete = ClientSDK.<span class="apidocCodeKeywordSpan">supportsForwardDelete</span>(this.clientSDK);
  this.storage.fieldsChangedByTrigger.forEach(function (fieldName) {
var dataValue = data[fieldName];
var responseValue = response[fieldName];

response[fieldName] = responseValue || dataValue;

// Strips operations from responses
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.FileSystemAdapter" id="apidoc.module.parse-server.FileSystemAdapter">module parse-server.FileSystemAdapter</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.FileSystemAdapter" id="apidoc.element.parse-server.FileSystemAdapter.FileSystemAdapter">
        function <span class="apidocSignatureSpan">parse-server.</span>FileSystemAdapter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FileSystemAdapter(options) {
  options = options || {};
  let filesSubDirectory = options.filesSubDirectory || &#x27;&#x27;;
  this._filesDir = filesSubDirectory;
  this._mkdir(this._getApplicationDir());
  if (!this._applicationDirExist()) {
    throw &#x22;Files directory doesn&#x27;t exist.&#x22;;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.default" id="apidoc.element.parse-server.FileSystemAdapter.default">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.</span>default
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FileSystemAdapter(options) {
  options = options || {};
  let filesSubDirectory = options.filesSubDirectory || &#x27;&#x27;;
  this._filesDir = filesSubDirectory;
  this._mkdir(this._getApplicationDir());
  if (!this._applicationDirExist()) {
    throw &#x22;Files directory doesn&#x27;t exist.&#x22;;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.FileSystemAdapter.prototype" id="apidoc.module.parse-server.FileSystemAdapter.prototype">module parse-server.FileSystemAdapter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype._applicationDirExist" id="apidoc.element.parse-server.FileSystemAdapter.prototype._applicationDirExist">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_applicationDirExist
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_applicationDirExist = function () {
  return fs.existsSync(this._getApplicationDir());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype._getApplicationDir" id="apidoc.element.parse-server.FileSystemAdapter.prototype._getApplicationDir">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_getApplicationDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getApplicationDir = function () {
 if (this._filesDir) {
   return path.join(&#x27;files&#x27;, this._filesDir);
 } else {
   return &#x27;files&#x27;;
 }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype._getLocalFilePath" id="apidoc.element.parse-server.FileSystemAdapter.prototype._getLocalFilePath">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_getLocalFilePath
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getLocalFilePath = function (filename) {
  let applicationDir = this._getApplicationDir();
  if (!fs.existsSync(applicationDir)) {
    this._mkdir(applicationDir);
  }
  return path.join(applicationDir, encodeURIComponent(filename));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype._mkdir" id="apidoc.element.parse-server.FileSystemAdapter.prototype._mkdir">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>_mkdir
        <span class="apidocSignatureSpan">(dirPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_mkdir = function (dirPath) {
  // snippet found on -&#x3e; https://gist.github.com/danherbert-epam/3960169
  let dirs = dirPath.split(pathSep);
  var root = &#x22;&#x22;;

  while (dirs.length &#x3e; 0) {
    var dir = dirs.shift();
    if (dir === &#x22;&#x22;) { // If directory starts with a /, the first path will be an empty string.
      root = pathSep;
    }
    if (!fs.existsSync(path.join(root, dir))) {
      try {
        fs.mkdirSync(path.join(root, dir));
      }
      catch (e) {
        if ( e.code == &#x27;EACCES&#x27; ) {
          throw new Error(&#x22;PERMISSION ERROR: In order to use the FileSystemAdapter, write access to the server&#x27;s file system is
required.&#x22;);
        }
      }
    }
    root = path.join(root, dir, pathSep);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype.createFile" id="apidoc.element.parse-server.FileSystemAdapter.prototype.createFile">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>createFile
        <span class="apidocSignatureSpan">(filename, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createFile = function (filename, data) {
  return new Promise((resolve, reject) =&#x3e; {
    let filepath = this._getLocalFilePath(filename);
    fs.writeFile(filepath, data, (err) =&#x3e; {
      if(err !== null) {
        return reject(err);
      }
      resolve(data);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype.deleteFile" id="apidoc.element.parse-server.FileSystemAdapter.prototype.deleteFile">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>deleteFile
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteFile = function (filename) {
  return new Promise((resolve, reject) =&#x3e; {
    let filepath = this._getLocalFilePath(filename);
    fs.readFile( filepath , function (err, data) {
      if(err !== null) {
        return reject(err);
      }
      fs.unlink(filepath, (unlinkErr) =&#x3e; {
      if(err !== null) {
          return reject(unlinkErr);
        }
        resolve(data);
      });
    });

  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype.getFileData" id="apidoc.element.parse-server.FileSystemAdapter.prototype.getFileData">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>getFileData
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFileData = function (filename) {
  return new Promise((resolve, reject) =&#x3e; {
    let filepath = this._getLocalFilePath(filename);
    fs.readFile( filepath , function (err, data) {
      if(err !== null) {
        return reject(err);
      }
      resolve(data);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.FileSystemAdapter.prototype.getFileLocation" id="apidoc.element.parse-server.FileSystemAdapter.prototype.getFileLocation">
        function <span class="apidocSignatureSpan">parse-server.FileSystemAdapter.prototype.</span>getFileLocation
        <span class="apidocSignatureSpan">(config, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFileLocation = function (config, filename) {
  return config.mount + &#x27;/files/&#x27; + config.applicationId + &#x27;/&#x27; + encodeURIComponent(filename);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.ParseServer" id="apidoc.module.parse-server.ParseServer">module parse-server.ParseServer</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.ParseServer.ParseServer" id="apidoc.element.parse-server.ParseServer.ParseServer">
        function <span class="apidocSignatureSpan">parse-server.</span>ParseServer
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _ParseServer(options) {
  var server = new _ParseServer3.default(options);
  return server.app;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.ParseServer.createLiveQueryServer" id="apidoc.element.parse-server.ParseServer.createLiveQueryServer">
        function <span class="apidocSignatureSpan">parse-server.ParseServer.</span>createLiveQueryServer
        <span class="apidocSignatureSpan">(httpServer, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createLiveQueryServer(httpServer, config) {
  return new _ParseLiveQueryServer.ParseLiveQueryServer(httpServer, config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.ParseServerRESTController" id="apidoc.module.parse-server.ParseServerRESTController">module parse-server.ParseServerRESTController</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.ParseServerRESTController.ParseServerRESTController" id="apidoc.element.parse-server.ParseServerRESTController.ParseServerRESTController">
        function <span class="apidocSignatureSpan">parse-server.</span>ParseServerRESTController
        <span class="apidocSignatureSpan">(applicationId, router)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ParseServerRESTController(applicationId, router) {
  function handleRequest(method, path) {
    var data = arguments.length &#x3e; 2 &#x26;&#x26; arguments[2] !== undefined ? arguments[2] : {};
    var options = arguments.length &#x3e; 3 &#x26;&#x26; arguments[3] !== undefined ? arguments[3] : {};

    // Store the arguments, for later use if internal fails
    var args = arguments;

    var config = new Config(applicationId);
    var serverURL = URL.parse(config.serverURL);
    if (path.indexOf(serverURL.path) === 0) {
      path = path.slice(serverURL.path.length, path.length);
    }

    if (path[0] !== &#x22;/&#x22;) {
      path = &#x22;/&#x22; + path;
    }

    if (path === &#x27;/batch&#x27;) {
      var promises = data.requests.map(function (request) {
        return handleRequest(request.method, request.path, request.body, options).then(function (response) {
          return Parse.Promise.as({ success: response });
        }, function (error) {
          return Parse.Promise.as({ error: { code: error.code, error: error.message } });
        });
      });
      return Parse.Promise.all(promises);
    }

    var query = void 0;
    if (method === &#x27;GET&#x27;) {
      query = data;
    }

    return new Parse.Promise(function (resolve, reject) {
      getAuth(options, config).then(function (auth) {
        var request = {
          body: data,
          config: config,
          auth: auth,
          info: {
            applicationId: applicationId,
            sessionToken: options.sessionToken
          },
          query: query
        };
        return Promise.resolve().then(function () {
          return router.tryRouteRequest(method, path, request);
        }).then(function (response) {
          resolve(response.response, response.status, response);
        }, function (err) {
          if (err instanceof Parse.Error &#x26;&#x26; err.code == Parse.Error.INVALID_JSON &#x26;&#x26; err.message == &#x27;cannot route &#x27; + method + &#x27; &#x27; +
path) {
            RESTController.request.apply(null, args).then(resolve, reject);
          } else {
            reject(err);
          }
        });
      }, reject);
    });
  }

  return {
    request: handleRequest,
    ajax: RESTController.ajax
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.ParseServerRESTController.default" id="apidoc.element.parse-server.ParseServerRESTController.default">
        function <span class="apidocSignatureSpan">parse-server.ParseServerRESTController.</span>default
        <span class="apidocSignatureSpan">(applicationId, router)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ParseServerRESTController(applicationId, router) {
  function handleRequest(method, path) {
    var data = arguments.length &#x3e; 2 &#x26;&#x26; arguments[2] !== undefined ? arguments[2] : {};
    var options = arguments.length &#x3e; 3 &#x26;&#x26; arguments[3] !== undefined ? arguments[3] : {};

    // Store the arguments, for later use if internal fails
    var args = arguments;

    var config = new Config(applicationId);
    var serverURL = URL.parse(config.serverURL);
    if (path.indexOf(serverURL.path) === 0) {
      path = path.slice(serverURL.path.length, path.length);
    }

    if (path[0] !== &#x22;/&#x22;) {
      path = &#x22;/&#x22; + path;
    }

    if (path === &#x27;/batch&#x27;) {
      var promises = data.requests.map(function (request) {
        return handleRequest(request.method, request.path, request.body, options).then(function (response) {
          return Parse.Promise.as({ success: response });
        }, function (error) {
          return Parse.Promise.as({ error: { code: error.code, error: error.message } });
        });
      });
      return Parse.Promise.all(promises);
    }

    var query = void 0;
    if (method === &#x27;GET&#x27;) {
      query = data;
    }

    return new Parse.Promise(function (resolve, reject) {
      getAuth(options, config).then(function (auth) {
        var request = {
          body: data,
          config: config,
          auth: auth,
          info: {
            applicationId: applicationId,
            sessionToken: options.sessionToken
          },
          query: query
        };
        return Promise.resolve().then(function () {
          return router.tryRouteRequest(method, path, request);
        }).then(function (response) {
          resolve(response.response, response.status, response);
        }, function (err) {
          if (err instanceof Parse.Error &#x26;&#x26; err.code == Parse.Error.INVALID_JSON &#x26;&#x26; err.message == &#x27;cannot route &#x27; + method + &#x27; &#x27; +
path) {
            RESTController.request.apply(null, args).then(resolve, reject);
          } else {
            reject(err);
          }
        });
      }, reject);
    });
  }

  return {
    request: handleRequest,
    ajax: RESTController.ajax
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.PromiseRouter" id="apidoc.module.parse-server.PromiseRouter">module parse-server.PromiseRouter</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.PromiseRouter.default" id="apidoc.element.parse-server.PromiseRouter.default">
        function <span class="apidocSignatureSpan">parse-server.PromiseRouter.</span>default
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PromiseRouter() {
  var routes = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : [];
  var appId = arguments[1];

  _classCallCheck(this, PromiseRouter);

  this.routes = routes;
  this.appId = appId;
  this.mountRoutes();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.RestQuery" id="apidoc.module.parse-server.RestQuery">module parse-server.RestQuery</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.RestQuery" id="apidoc.element.parse-server.RestQuery.RestQuery">
        function <span class="apidocSignatureSpan">parse-server.</span>RestQuery
        <span class="apidocSignatureSpan">(config, auth, className)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RestQuery(config, auth, className) {
  var restWhere = arguments.length &#x3e; 3 &#x26;&#x26; arguments[3] !== undefined ? arguments[3] : {};
  var restOptions = arguments.length &#x3e; 4 &#x26;&#x26; arguments[4] !== undefined ? arguments[4] : {};
  var clientSDK = arguments[5];


  this.config = config;
  this.auth = auth;
  this.className = className;
  this.restWhere = restWhere;
  this.restOptions = restOptions;
  this.clientSDK = clientSDK;
  this.response = null;
  this.findOptions = {};
  if (!this.auth.isMaster) {
    this.findOptions.acl = this.auth.user ? [this.auth.user.id] : null;
    if (this.className == &#x27;_Session&#x27;) {
      if (!this.findOptions.acl) {
        throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;This session token is invalid.&#x27;);
      }
      this.restWhere = {
        &#x27;$and&#x27;: [this.restWhere, {
          &#x27;user&#x27;: {
            __type: &#x27;Pointer&#x27;,
            className: &#x27;_User&#x27;,
            objectId: this.auth.user.id
          }
        }]
      };
    }
  }

  this.doCount = false;

  // The format for this.include is not the same as the format for the
  // include option - it&#x27;s the paths we should include, in order,
  // stored as arrays, taking into account that we need to include foo
  // before including foo.bar. Also it should dedupe.
  // For example, passing an arg of include=foo.bar,foo.baz could lead to
  // this.include = [[&#x27;foo&#x27;], [&#x27;foo&#x27;, &#x27;baz&#x27;], [&#x27;foo&#x27;, &#x27;bar&#x27;]]
  this.include = [];

  // If we have keys, we probably want to force some includes (n-1 level)
  // See issue: https://github.com/ParsePlatform/parse-server/issues/3185
  if (restOptions.hasOwnProperty(&#x27;keys&#x27;)) {
    var keysForInclude = restOptions.keys.split(&#x27;,&#x27;).filter(function (key) {
      // At least 2 components
      return key.split(&#x22;.&#x22;).length &#x3e; 1;
    }).map(function (key) {
      // Slice the last component (a.b.c -&#x3e; a.b)
      // Otherwise we&#x27;ll include one level too much.
      return key.slice(0, key.lastIndexOf(&#x22;.&#x22;));
    }).join(&#x27;,&#x27;);

    // Concat the possibly present include string with the one from the keys
    // Dedup / sorting is handle in &#x27;include&#x27; case.
    if (keysForInclude.length &#x3e; 0) {
      if (!restOptions.include || restOptions.include.length == 0) {
        restOptions.include = keysForInclude;
      } else {
        restOptions.include += &#x22;,&#x22; + keysForInclude;
      }
    }
  }

  for (var option in restOptions) {
    switch (option) {
      case &#x27;keys&#x27;:
        {
          var keys = restOptions.keys.split(&#x27;,&#x27;).concat(AlwaysSelectedKeys);
          this.keys = Array.from(new Set(keys));
          break;
        }
      case &#x27;count&#x27;:
        this.doCount = true;
        break;
      case &#x27;skip&#x27;:
      case &#x27;limit&#x27;:
        this.findOptions[option] = restOptions[option];
        break;
      case &#x27;order&#x27;:
        var fields = restOptions.order.split(&#x27;,&#x27;);
        this.findOptions.sort = fields.reduce(function (sortMap, field) {
          field = field.trim();
          if (field[0] == &#x27;-&#x27;) {
            sortMap[field.slice(1)] = -1;
          } else {
            sortMap[field] = 1;
          }
          return sortMap;
        }, {});
        break;
      case &#x27;include&#x27;:
        {
          var paths = restOptions.include.split(&#x27;,&#x27;);
          // Load the existing includes (from keys)
          var pathSet = paths.reduce(function (memo, path) {
            // Split each paths on . (a.b.c -&#x3e; [a,b,c])
            // reduce to create all paths
            // ([a,b,c] -&#x3e; {a: true, &#x27;a.b&#x27;: true, &#x27;a.b.c&#x27;: true})
            return path.split(&#x27;.&#x27;).reduce(function (memo, path, index, parts) {
              memo[parts.slice(0, index + 1).join(&#x27;.&#x27;)] = true;
              return memo;
            }, memo);
          }, {});

          this.include = Object.keys(pathSet).map(function (s) {
            return s.split(&#x27;.&#x27;);
          }).sort(function (a, b) {
            return a.length - b.length; // Sort by number of components
          });
          break;
        }
      case &#x27;redirectClassNameForKey&#x27;:
        this.redirectKey = restOptions.redirectClassNameForKey;
        this.redirectClassName = null; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.RestQuery.prototype" id="apidoc.module.parse-server.RestQuery.prototype">module parse-server.RestQuery.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.buildRestWhere" id="apidoc.element.parse-server.RestQuery.prototype.buildRestWhere">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>buildRestWhere
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildRestWhere = function () {
  var _this2 = this;

  return Promise.resolve().then(function () {
    return _this2.getUserAndRoleACL();
  }).then(function () {
    return _this2.redirectClassNameForKey();
  }).then(function () {
    return _this2.validateClientClassCreation();
  }).then(function () {
    return _this2.replaceSelect();
  }).then(function () {
    return _this2.replaceDontSelect();
  }).then(function () {
    return _this2.replaceInQuery();
  }).then(function () {
    return _this2.replaceNotInQuery();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Returns a promise for the response - an object with optional keys
// &#x27;results&#x27; and &#x27;count&#x27;.
// TODO: consolidate the replaceX functions
RestQuery.prototype.execute = function (executeOptions) {
var _this = this;

return Promise.resolve().then(function () {
  return _this.<span class="apidocCodeKeywordSpan">buildRestWhere</span>();
}).then(function () {
  return _this.runFind(executeOptions);
}).then(function () {
  return _this.runCount();
}).then(function () {
  return _this.handleInclude();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.execute" id="apidoc.element.parse-server.RestQuery.prototype.execute">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>execute
        <span class="apidocSignatureSpan">(executeOptions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (executeOptions) {
  var _this = this;

  return Promise.resolve().then(function () {
    return _this.buildRestWhere();
  }).then(function () {
    return _this.runFind(executeOptions);
  }).then(function () {
    return _this.runCount();
  }).then(function () {
    return _this.handleInclude();
  }).then(function () {
    return _this.runAfterFindTrigger();
  }).then(function () {
    return _this.response;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    var restOptions = {
limit: 1,
include: &#x27;user&#x27;
    };

    var query = new RestQuery(config, master(config), &#x27;_Session&#x27;, { sessionToken: sessionToken }, restOptions);
    return query.<span class="apidocCodeKeywordSpan">execute</span>().then(function (response) {
var results = response.results;
if (results.length !== 1 || !results[0][&#x27;user&#x27;]) {
  throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;invalid session token&#x27;);
}

var now = new Date(),
    expiresAt = results[0].expiresAt ? new Date(results[0].expiresAt.iso) : undefined;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.getUserAndRoleACL" id="apidoc.element.parse-server.RestQuery.prototype.getUserAndRoleACL">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>getUserAndRoleACL
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAndRoleACL = function () {
  var _this3 = this;

  if (this.auth.isMaster || !this.auth.user) {
    return Promise.resolve();
  }
  return this.auth.getUserRoles().then(function (roles) {
    // Concat with the roles to prevent duplications on multiple calls
    var aclSet = new Set([].concat(_this3.findOptions.acl, roles));
    _this3.findOptions.acl = Array.from(aclSet);
    return Promise.resolve();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

RestQuery.prototype.buildRestWhere = function () {
var _this2 = this;

return Promise.resolve().then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">getUserAndRoleACL</span>();
}).then(function () {
  return _this2.redirectClassNameForKey();
}).then(function () {
  return _this2.validateClientClassCreation();
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.handleInclude" id="apidoc.element.parse-server.RestQuery.prototype.handleInclude">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>handleInclude
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleInclude = function () {
  var _this12 = this;

  if (this.include.length == 0) {
    return;
  }

  var pathResponse = includePath(this.config, this.auth, this.response, this.include[0], this.restOptions);
  if (pathResponse.then) {
    return pathResponse.then(function (newResponse) {
      _this12.response = newResponse;
      _this12.include = _this12.include.slice(1);
      return _this12.handleInclude();
    });
  } else if (this.include.length &#x3e; 0) {
    this.include = this.include.slice(1);
    return this.handleInclude();
  }

  return pathResponse;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return Promise.resolve().then(function () {
    return _this.buildRestWhere();
  }).then(function () {
    return _this.runFind(executeOptions);
  }).then(function () {
    return _this.runCount();
  }).then(function () {
    return _this.<span class="apidocCodeKeywordSpan">handleInclude</span>();
  }).then(function () {
    return _this.runAfterFindTrigger();
  }).then(function () {
    return _this.response;
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.redirectClassNameForKey" id="apidoc.element.parse-server.RestQuery.prototype.redirectClassNameForKey">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>redirectClassNameForKey
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirectClassNameForKey = function () {
  var _this4 = this;

  if (!this.redirectKey) {
    return Promise.resolve();
  }

  // We need to change the class name based on the schema
  return this.config.database.redirectClassNameForKey(this.className, this.redirectKey).then(function (newClassName) {
    _this4.className = newClassName;
    _this4.redirectClassName = newClassName;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

RestQuery.prototype.buildRestWhere = function () {
var _this2 = this;

return Promise.resolve().then(function () {
  return _this2.getUserAndRoleACL();
}).then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">redirectClassNameForKey</span>();
}).then(function () {
  return _this2.validateClientClassCreation();
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
  return _this2.replaceDontSelect();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.replaceDontSelect" id="apidoc.element.parse-server.RestQuery.prototype.replaceDontSelect">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceDontSelect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceDontSelect = function () {
  var _this9 = this;

  var dontSelectObject = findObjectWithKey(this.restWhere, &#x27;$dontSelect&#x27;);
  if (!dontSelectObject) {
    return;
  }

  // The dontSelect value must have precisely two keys - query and key
  var dontSelectValue = dontSelectObject[&#x27;$dontSelect&#x27;];
  if (!dontSelectValue.query || !dontSelectValue.key || _typeof(dontSelectValue.query) !== &#x27;object&#x27; || !dontSelectValue.query.className
 || Object.keys(dontSelectValue).length !== 2) {
    throw new Parse.Error(Parse.Error.INVALID_QUERY, &#x27;improper usage of $dontSelect&#x27;);
  }
  var additionalOptions = {
    redirectClassNameForKey: dontSelectValue.query.redirectClassNameForKey
  };

  var subquery = new RestQuery(this.config, this.auth, dontSelectValue.query.className, dontSelectValue.query.where, additionalOptions
);
  return subquery.execute().then(function (response) {
    transformDontSelect(dontSelectObject, dontSelectValue.key, response.results);
    // Keep replacing $dontSelect clauses
    return _this9.replaceDontSelect();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }).then(function () {
    return _this2.redirectClassNameForKey();
  }).then(function () {
    return _this2.validateClientClassCreation();
  }).then(function () {
    return _this2.replaceSelect();
  }).then(function () {
    return _this2.<span class="apidocCodeKeywordSpan">replaceDontSelect</span>();
  }).then(function () {
    return _this2.replaceInQuery();
  }).then(function () {
    return _this2.replaceNotInQuery();
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.replaceInQuery" id="apidoc.element.parse-server.RestQuery.prototype.replaceInQuery">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceInQuery
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceInQuery = function () {
  var _this6 = this;

  var inQueryObject = findObjectWithKey(this.restWhere, &#x27;$inQuery&#x27;);
  if (!inQueryObject) {
    return;
  }

  // The inQuery value must have precisely two keys - where and className
  var inQueryValue = inQueryObject[&#x27;$inQuery&#x27;];
  if (!inQueryValue.where || !inQueryValue.className) {
    throw new Parse.Error(Parse.Error.INVALID_QUERY, &#x27;improper usage of $inQuery&#x27;);
  }

  var additionalOptions = {
    redirectClassNameForKey: inQueryValue.redirectClassNameForKey
  };

  var subquery = new RestQuery(this.config, this.auth, inQueryValue.className, inQueryValue.where, additionalOptions);
  return subquery.execute().then(function (response) {
    transformInQuery(inQueryObject, subquery.className, response.results);
    // Recurse to repeat
    return _this6.replaceInQuery();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }).then(function () {
    return _this2.validateClientClassCreation();
  }).then(function () {
    return _this2.replaceSelect();
  }).then(function () {
    return _this2.replaceDontSelect();
  }).then(function () {
    return _this2.<span class="apidocCodeKeywordSpan">replaceInQuery</span>();
  }).then(function () {
    return _this2.replaceNotInQuery();
  });
};

// Uses the Auth object to get the list of roles, adds the user id
RestQuery.prototype.getUserAndRoleACL = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.replaceNotInQuery" id="apidoc.element.parse-server.RestQuery.prototype.replaceNotInQuery">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceNotInQuery
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceNotInQuery = function () {
  var _this7 = this;

  var notInQueryObject = findObjectWithKey(this.restWhere, &#x27;$notInQuery&#x27;);
  if (!notInQueryObject) {
    return;
  }

  // The notInQuery value must have precisely two keys - where and className
  var notInQueryValue = notInQueryObject[&#x27;$notInQuery&#x27;];
  if (!notInQueryValue.where || !notInQueryValue.className) {
    throw new Parse.Error(Parse.Error.INVALID_QUERY, &#x27;improper usage of $notInQuery&#x27;);
  }

  var additionalOptions = {
    redirectClassNameForKey: notInQueryValue.redirectClassNameForKey
  };

  var subquery = new RestQuery(this.config, this.auth, notInQueryValue.className, notInQueryValue.where, additionalOptions);
  return subquery.execute().then(function (response) {
    transformNotInQuery(notInQueryObject, subquery.className, response.results);
    // Recurse to repeat
    return _this7.replaceNotInQuery();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
  return _this2.replaceDontSelect();
}).then(function () {
  return _this2.replaceInQuery();
}).then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">replaceNotInQuery</span>();
});
};

// Uses the Auth object to get the list of roles, adds the user id
RestQuery.prototype.getUserAndRoleACL = function () {
var _this3 = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.replaceSelect" id="apidoc.element.parse-server.RestQuery.prototype.replaceSelect">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>replaceSelect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceSelect = function () {
  var _this8 = this;

  var selectObject = findObjectWithKey(this.restWhere, &#x27;$select&#x27;);
  if (!selectObject) {
    return;
  }

  // The select value must have precisely two keys - query and key
  var selectValue = selectObject[&#x27;$select&#x27;];
  // iOS SDK don&#x27;t send where if not set, let it pass
  if (!selectValue.query || !selectValue.key || _typeof(selectValue.query) !== &#x27;object&#x27; || !selectValue.query.className || Object
.keys(selectValue).length !== 2) {
    throw new Parse.Error(Parse.Error.INVALID_QUERY, &#x27;improper usage of $select&#x27;);
  }

  var additionalOptions = {
    redirectClassNameForKey: selectValue.query.redirectClassNameForKey
  };

  var subquery = new RestQuery(this.config, this.auth, selectValue.query.className, selectValue.query.where, additionalOptions);
  return subquery.execute().then(function (response) {
    transformSelect(selectObject, selectValue.key, response.results);
    // Keep replacing $select clauses
    return _this8.replaceSelect();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return Promise.resolve().then(function () {
  return _this2.getUserAndRoleACL();
}).then(function () {
  return _this2.redirectClassNameForKey();
}).then(function () {
  return _this2.validateClientClassCreation();
}).then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">replaceSelect</span>();
}).then(function () {
  return _this2.replaceDontSelect();
}).then(function () {
  return _this2.replaceInQuery();
}).then(function () {
  return _this2.replaceNotInQuery();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.runAfterFindTrigger" id="apidoc.element.parse-server.RestQuery.prototype.runAfterFindTrigger">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runAfterFindTrigger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runAfterFindTrigger = function () {
  var _this13 = this;

  if (!this.response) {
    return;
  }
  // Avoid doing any setup for triggers if there is no &#x27;afterFind&#x27; trigger for this class.
  var hasAfterFindHook = triggers.triggerExists(this.className, triggers.Types.afterFind, this.config.applicationId);
  if (!hasAfterFindHook) {
    return Promise.resolve();
  }
  // Run afterFind trigger and set the new results
  return triggers.maybeRunAfterFindTrigger(triggers.Types.afterFind, this.auth, this.className, this.response.results, this.config
).then(function (results) {
    _this13.response.results = results;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.runFind(executeOptions);
}).then(function () {
  return _this.runCount();
}).then(function () {
  return _this.handleInclude();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">runAfterFindTrigger</span>();
}).then(function () {
  return _this.response;
});
};

RestQuery.prototype.buildRestWhere = function () {
var _this2 = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.runCount" id="apidoc.element.parse-server.RestQuery.prototype.runCount">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runCount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runCount = function () {
  var _this11 = this;

  if (!this.doCount) {
    return;
  }
  this.findOptions.count = true;
  delete this.findOptions.skip;
  delete this.findOptions.limit;
  return this.config.database.find(this.className, this.restWhere, this.findOptions).then(function (c) {
    _this11.response.count = c;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this = this;

return Promise.resolve().then(function () {
  return _this.buildRestWhere();
}).then(function () {
  return _this.runFind(executeOptions);
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">runCount</span>();
}).then(function () {
  return _this.handleInclude();
}).then(function () {
  return _this.runAfterFindTrigger();
}).then(function () {
  return _this.response;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.runFind" id="apidoc.element.parse-server.RestQuery.prototype.runFind">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>runFind
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runFind = function () {
  var _this10 = this;

  var options = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {};

  if (this.findOptions.limit === 0) {
    this.response = { results: [] };
    return Promise.resolve();
  }
  var findOptions = Object.assign({}, this.findOptions);
  if (this.keys) {
    findOptions.keys = this.keys.map(function (key) {
      return key.split(&#x27;.&#x27;)[0];
    });
  }
  if (options.op) {
    findOptions.op = options.op;
  }
  return this.config.database.find(this.className, this.restWhere, findOptions).then(function (results) {
    if (_this10.className === &#x27;_User&#x27;) {
      var _iteratorNormalCompletion6 = true;
      var _didIteratorError6 = false;
      var _iteratorError6 = undefined;

      try {
        for (var _iterator6 = results[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done
); _iteratorNormalCompletion6 = true) {
          var result = _step6.value;

          cleanResultOfSensitiveUserInfo(result, _this10.auth, _this10.config);
          cleanResultAuthData(result);
        }
      } catch (err) {
        _didIteratorError6 = true;
        _iteratorError6 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion6 &#x26;&#x26; _iterator6.return) {
            _iterator6.return();
          }
        } finally {
          if (_didIteratorError6) {
            throw _iteratorError6;
          }
        }
      }
    }

    _this10.config.filesController.expandFilesInObject(_this10.config, results);

    if (_this10.redirectClassName) {
      var _iteratorNormalCompletion7 = true;
      var _didIteratorError7 = false;
      var _iteratorError7 = undefined;

      try {
        for (var _iterator7 = results[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done
); _iteratorNormalCompletion7 = true) {
          var r = _step7.value;

          r.className = _this10.redirectClassName;
        }
      } catch (err) {
        _didIteratorError7 = true;
        _iteratorError7 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion7 &#x26;&#x26; _iterator7.return) {
            _iterator7.return();
          }
        } finally {
          if (_didIteratorError7) {
            throw _iteratorError7;
          }
        }
      }
    }
    _this10.response = { results: results };
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// TODO: consolidate the replaceX functions
RestQuery.prototype.execute = function (executeOptions) {
var _this = this;

return Promise.resolve().then(function () {
  return _this.buildRestWhere();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">runFind</span>(executeOptions);
}).then(function () {
  return _this.runCount();
}).then(function () {
  return _this.handleInclude();
}).then(function () {
  return _this.runAfterFindTrigger();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestQuery.prototype.validateClientClassCreation" id="apidoc.element.parse-server.RestQuery.prototype.validateClientClassCreation">
        function <span class="apidocSignatureSpan">parse-server.RestQuery.prototype.</span>validateClientClassCreation
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateClientClassCreation = function () {
  var _this5 = this;

  if (this.config.allowClientClassCreation === false &#x26;&#x26; !this.auth.isMaster &#x26;&#x26; SchemaController.systemClasses.indexOf(this.className
) === -1) {
    return this.config.database.loadSchema().then(function (schemaController) {
      return schemaController.hasClass(_this5.className);
    }).then(function (hasClass) {
      if (hasClass !== true) {
        throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN, &#x27;This user is not allowed to access &#x27; + &#x27;non-existent class: &#x27; +
_this5.className);
      }
    });
  } else {
    return Promise.resolve();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this2 = this;

return Promise.resolve().then(function () {
  return _this2.getUserAndRoleACL();
}).then(function () {
  return _this2.redirectClassNameForKey();
}).then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">validateClientClassCreation</span>();
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
  return _this2.replaceDontSelect();
}).then(function () {
  return _this2.replaceInQuery();
}).then(function () {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.RestWrite" id="apidoc.module.parse-server.RestWrite">module parse-server.RestWrite</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.RestWrite" id="apidoc.element.parse-server.RestWrite.RestWrite">
        function <span class="apidocSignatureSpan">parse-server.</span>RestWrite
        <span class="apidocSignatureSpan">(config, auth, className, query, data, originalData, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RestWrite(config, auth, className, query, data, originalData, clientSDK) {
  this.config = config;
  this.auth = auth;
  this.className = className;
  this.clientSDK = clientSDK;
  this.storage = {};
  this.runOptions = {};
  if (!query &#x26;&#x26; data.objectId) {
    throw new Parse.Error(Parse.Error.INVALID_KEY_NAME, &#x27;objectId is an invalid field name.&#x27;);
  }

  // When the operation is complete, this.response may have several
  // fields.
  // response: the actual data to be returned
  // status: the http status code. if not present, treated like a 200
  // location: the location header. if not present, no location header
  this.response = null;

  // Processing this operation may mutate our data, so we operate on a
  // copy
  this.query = deepcopy(query);
  this.data = deepcopy(data);
  // We never change originalData, so we do not need a deep copy
  this.originalData = originalData;

  // The timestamp we&#x27;ll use for this whole operation
  this.updatedAt = Parse._encode(new Date()).iso;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.RestWrite.prototype" id="apidoc.module.parse-server.RestWrite.prototype">module parse-server.RestWrite.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._updateResponseWithData" id="apidoc.element.parse-server.RestWrite.prototype._updateResponseWithData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_updateResponseWithData
        <span class="apidocSignatureSpan">(response, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_updateResponseWithData = function (response, data) {
  if (_lodash2.default.isEmpty(this.storage.fieldsChangedByTrigger)) {
    return response;
  }
  var clientSupportsDelete = ClientSDK.supportsForwardDelete(this.clientSDK);
  this.storage.fieldsChangedByTrigger.forEach(function (fieldName) {
    var dataValue = data[fieldName];
    var responseValue = response[fieldName];

    response[fieldName] = responseValue || dataValue;

    // Strips operations from responses
    if (response[fieldName] &#x26;&#x26; response[fieldName].__op) {
      delete response[fieldName];
      if (clientSupportsDelete &#x26;&#x26; dataValue.__op == &#x27;Delete&#x27;) {
        response[fieldName] = dataValue;
      }
    }
  });
  return response;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
  }

  return defer.then(function () {
    // Run an update
    return _this14.config.database.update(_this14.className, _this14.query, _this14.data, _this14.runOptions).then(function (response
) {
      response.updatedAt = _this14.updatedAt;
      _this14.<span class="apidocCodeKeywordSpan">_updateResponseWithData</span>(response, _this14.data);
      _this14.response = { response: response };
    });
  });
} else {
  // Set the default ACL and password timestamp for the new _User
  if (this.className === &#x27;_User&#x27;) {
    var ACL = this.data.ACL;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._validateEmail" id="apidoc.element.parse-server.RestWrite.prototype._validateEmail">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validateEmail
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validateEmail = function () {
  var _this8 = this;

  if (!this.data.email || this.data.email.__op === &#x27;Delete&#x27;) {
    return Promise.resolve();
  }
  // Validate basic email address format
  if (!this.data.email.match(/^.+@.+$/)) {
    return Promise.reject(new Parse.Error(Parse.Error.INVALID_EMAIL_ADDRESS, &#x27;Email address format is invalid.&#x27;));
  }
  // Same problem for email as above for username
  return this.config.database.find(this.className, { email: this.data.email, objectId: { &#x27;$ne&#x27;: this.objectId() } }, { limit: 1 }).
then(function (results) {
    if (results.length &#x3e; 0) {
      throw new Parse.Error(Parse.Error.EMAIL_TAKEN, &#x27;Account already exists for this email address.&#x27;);
    }
    // We updated the email, send a new validation
    _this8.storage[&#x27;sendVerificationEmail&#x27;] = true;
    _this8.config.userController.setEmailVerifyToken(_this8.data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      _this7.data._hashed_password = hashedPassword;
      delete _this7.data.password;
    });
  });
}).then(function () {
  return _this7._validateUserName();
}).then(function () {
  return _this7.<span class="apidocCodeKeywordSpan">_validateEmail</span>();
});
};

RestWrite.prototype._validateUserName = function () {
// Check for username uniqueness
if (!this.data.username) {
  if (!this.query) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordHistory" id="apidoc.element.parse-server.RestWrite.prototype._validatePasswordHistory">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordHistory
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validatePasswordHistory = function () {
  var _this11 = this;

  // check whether password is repeating from specified history
  if (this.query &#x26;&#x26; this.config.passwordPolicy.maxPasswordHistory) {
    return this.config.database.find(&#x27;_User&#x27;, { objectId: this.objectId() }, { keys: [&#x22;_password_history&#x22;, &#x22;_hashed_password&#x22;] }).
then(function (results) {
      if (results.length != 1) {
        throw undefined;
      }
      var user = results[0];
      var oldPasswords = [];
      if (user._password_history) oldPasswords = _lodash2.default.take(user._password_history, _this11.config.passwordPolicy.maxPasswordHistory
 - 1);
      oldPasswords.push(user.password);
      var newPassword = _this11.data.password;
      // compare the new password hash with all old password hashes
      var promises = oldPasswords.map(function (hash) {
        return passwordCrypto.compare(newPassword, hash).then(function (result) {
          if (result) // reject if there is a match
            return Promise.reject(&#x22;REPEAT_PASSWORD&#x22;);
          return Promise.resolve();
        });
      });
      // wait for all comparisons to complete
      return Promise.all(promises).then(function () {
        return Promise.resolve();
      }).catch(function (err) {
        if (err === &#x22;REPEAT_PASSWORD&#x22;) // a match was found
          return Promise.reject(new Parse.Error(Parse.Error.VALIDATION_ERROR, &#x27;New password should not be the same as last &#x27; + _this11
.config.passwordPolicy.maxPasswordHistory + &#x27; passwords.&#x27;));
        throw err;
      });
    });
  }
  return Promise.resolve();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

RestWrite.prototype._validatePasswordPolicy = function () {
var _this9 = this;

if (!this.config.passwordPolicy) return Promise.resolve();
return this._validatePasswordRequirements().then(function () {
  return _this9.<span class="apidocCodeKeywordSpan">_validatePasswordHistory</span>();
});
};

RestWrite.prototype._validatePasswordRequirements = function () {
var _this10 = this;

// check if the password conforms to the defined password policy if configured
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordPolicy" id="apidoc.element.parse-server.RestWrite.prototype._validatePasswordPolicy">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordPolicy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validatePasswordPolicy = function () {
  var _this9 = this;

  if (!this.config.passwordPolicy) return Promise.resolve();
  return this._validatePasswordRequirements().then(function () {
    return _this9._validatePasswordHistory();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  if (_this7.query &#x26;&#x26; !_this7.auth.isMaster) {
    _this7.storage[&#x27;clearSessions&#x27;] = true;
    _this7.storage[&#x27;generateNewSession&#x27;] = true;
  }

  return _this7.<span class="apidocCodeKeywordSpan">_validatePasswordPolicy</span>().then(function () {
    return passwordCrypto.hash(_this7.data.password).then(function (hashedPassword) {
      _this7.data._hashed_password = hashedPassword;
      delete _this7.data.password;
    });
  });
}).then(function () {
  return _this7._validateUserName();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._validatePasswordRequirements" id="apidoc.element.parse-server.RestWrite.prototype._validatePasswordRequirements">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validatePasswordRequirements
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validatePasswordRequirements = function () {
  var _this10 = this;

  // check if the password conforms to the defined password policy if configured
  var policyError = &#x27;Password does not meet the Password Policy requirements.&#x27;;

  // check whether the password meets the password strength requirements
  if (this.config.passwordPolicy.patternValidator &#x26;&#x26; !this.config.passwordPolicy.patternValidator(this.data.password) || this.config
.passwordPolicy.validatorCallback &#x26;&#x26; !this.config.passwordPolicy.validatorCallback(this.data.password)) {
    return Promise.reject(new Parse.Error(Parse.Error.VALIDATION_ERROR, policyError));
  }

  // check whether password contain username
  if (this.config.passwordPolicy.doNotAllowUsername === true) {
    if (this.data.username) {
      // username is not passed during password reset
      if (this.data.password.indexOf(this.data.username) &#x3e;= 0) return Promise.reject(new Parse.Error(Parse.Error.VALIDATION_ERROR
, policyError));
    } else {
      // retrieve the User object using objectId during password reset
      return this.config.database.find(&#x27;_User&#x27;, { objectId: this.objectId() }).then(function (results) {
        if (results.length != 1) {
          throw undefined;
        }
        if (_this10.data.password.indexOf(results[0].username) &#x3e;= 0) return Promise.reject(new Parse.Error(Parse.Error.VALIDATION_ERROR
, policyError));
        return Promise.resolve();
      });
    }
  }
  return Promise.resolve();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

RestWrite.prototype._validatePasswordPolicy = function () {
var _this9 = this;

if (!this.config.passwordPolicy) return Promise.resolve();
return this.<span class="apidocCodeKeywordSpan">_validatePasswordRequirements</span>().then(function () {
  return _this9._validatePasswordHistory();
});
};

RestWrite.prototype._validatePasswordRequirements = function () {
var _this10 = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype._validateUserName" id="apidoc.element.parse-server.RestWrite.prototype._validateUserName">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>_validateUserName
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_validateUserName = function () {
  // Check for username uniqueness
  if (!this.data.username) {
    if (!this.query) {
      this.data.username = cryptoUtils.randomString(25);
      this.responseShouldHaveUsername = true;
    }
    return Promise.resolve();
  }
  // We need to a find to check for duplicate username in case they are missing the unique index on usernames
  // TODO: Check if there is a unique index, and if so, skip this query.
  return this.config.database.find(this.className, { username: this.data.username, objectId: { &#x27;$ne&#x27;: this.objectId() } }, { limit
: 1 }).then(function (results) {
    if (results.length &#x3e; 0) {
      throw new Parse.Error(Parse.Error.USERNAME_TAKEN, &#x27;Account already exists for this username.&#x27;);
    }
    return;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return _this7._validatePasswordPolicy().then(function () {
    return passwordCrypto.hash(_this7.data.password).then(function (hashedPassword) {
      _this7.data._hashed_password = hashedPassword;
      delete _this7.data.password;
    });
  });
}).then(function () {
  return _this7.<span class="apidocCodeKeywordSpan">_validateUserName</span>();
}).then(function () {
  return _this7._validateEmail();
});
};

RestWrite.prototype._validateUserName = function () {
// Check for username uniqueness
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.cleanUserAuthData" id="apidoc.element.parse-server.RestWrite.prototype.cleanUserAuthData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>cleanUserAuthData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cleanUserAuthData = function () {
  if (this.response &#x26;&#x26; this.response.response &#x26;&#x26; this.className === &#x27;_User&#x27;) {
    var user = this.response.response;
    if (user.authData) {
      Object.keys(user.authData).forEach(function (provider) {
        if (user.authData[provider] === null) {
          delete user.authData[provider];
        }
      });
      if (Object.keys(user.authData).length == 0) {
        delete user.authData;
      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }).then(function () {
    return _this.createSessionTokenIfNeeded();
  }).then(function () {
    return _this.handleFollowup();
  }).then(function () {
    return _this.runAfterTrigger();
  }).then(function () {
    return _this.<span class="apidocCodeKeywordSpan">cleanUserAuthData</span>();
  }).then(function () {
    return _this.response;
  });
};

// Uses the Auth object to get the list of roles, adds the user id
RestWrite.prototype.getUserAndRoleACL = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.createSessionToken" id="apidoc.element.parse-server.RestWrite.prototype.createSessionToken">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>createSessionToken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createSessionToken = function () {
  // cloud installationId from Cloud Code,
  // never create session tokens from there.
  if (this.auth.installationId &#x26;&#x26; this.auth.installationId === &#x27;cloud&#x27;) {
    return;
  }
  var token = &#x27;r:&#x27; + cryptoUtils.newToken();

  var expiresAt = this.config.generateSessionExpiresAt();
  var sessionData = {
    sessionToken: token,
    user: {
      __type: &#x27;Pointer&#x27;,
      className: &#x27;_User&#x27;,
      objectId: this.objectId()
    },
    createdWith: {
      &#x27;action&#x27;: &#x27;signup&#x27;,
      &#x27;authProvider&#x27;: this.storage[&#x27;authProvider&#x27;] || &#x27;password&#x27;
    },
    restricted: false,
    installationId: this.auth.installationId,
    expiresAt: Parse._encode(expiresAt)
  };
  if (this.response &#x26;&#x26; this.response.response) {
    this.response.response.sessionToken = token;
  }
  var create = new RestWrite(this.config, Auth.master(this.config), &#x27;_Session&#x27;, null, sessionData);
  return create.execute();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RestWrite.prototype.createSessionTokenIfNeeded = function () {
if (this.className !== &#x27;_User&#x27;) {
  return;
}
if (this.query) {
  return;
}
return this.<span class="apidocCodeKeywordSpan">createSessionToken</span>();
};

RestWrite.prototype.createSessionToken = function () {
// cloud installationId from Cloud Code,
// never create session tokens from there.
if (this.auth.installationId &#x26;&#x26; this.auth.installationId === &#x27;cloud&#x27;) {
  return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.createSessionTokenIfNeeded" id="apidoc.element.parse-server.RestWrite.prototype.createSessionTokenIfNeeded">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>createSessionTokenIfNeeded
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createSessionTokenIfNeeded = function () {
  if (this.className !== &#x27;_User&#x27;) {
    return;
  }
  if (this.query) {
    return;
  }
  return this.createSessionToken();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.transformUser();
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
  return _this.runDatabaseOperation();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">createSessionTokenIfNeeded</span>();
}).then(function () {
  return _this.handleFollowup();
}).then(function () {
  return _this.runAfterTrigger();
}).then(function () {
  return _this.cleanUserAuthData();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.execute" id="apidoc.element.parse-server.RestWrite.prototype.execute">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>execute
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function () {
  var _this = this;

  return Promise.resolve().then(function () {
    return _this.getUserAndRoleACL();
  }).then(function () {
    return _this.validateClientClassCreation();
  }).then(function () {
    return _this.handleInstallation();
  }).then(function () {
    return _this.handleSession();
  }).then(function () {
    return _this.validateAuthData();
  }).then(function () {
    return _this.runBeforeTrigger();
  }).then(function () {
    return _this.validateSchema();
  }).then(function () {
    return _this.setRequiredFieldsIfNeeded();
  }).then(function () {
    return _this.transformUser();
  }).then(function () {
    return _this.expandFilesForExistingObjects();
  }).then(function () {
    return _this.runDatabaseOperation();
  }).then(function () {
    return _this.createSessionTokenIfNeeded();
  }).then(function () {
    return _this.handleFollowup();
  }).then(function () {
    return _this.runAfterTrigger();
  }).then(function () {
    return _this.cleanUserAuthData();
  }).then(function () {
    return _this.response;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    var restOptions = {
limit: 1,
include: &#x27;user&#x27;
    };

    var query = new RestQuery(config, master(config), &#x27;_Session&#x27;, { sessionToken: sessionToken }, restOptions);
    return query.<span class="apidocCodeKeywordSpan">execute</span>().then(function (response) {
var results = response.results;
if (results.length !== 1 || !results[0][&#x27;user&#x27;]) {
  throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;invalid session token&#x27;);
}

var now = new Date(),
    expiresAt = results[0].expiresAt ? new Date(results[0].expiresAt.iso) : undefined;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.expandFilesForExistingObjects" id="apidoc.element.parse-server.RestWrite.prototype.expandFilesForExistingObjects">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>expandFilesForExistingObjects
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">expandFilesForExistingObjects = function () {
  // Check whether we have a short-circuited response - only then run expansion.
  if (this.response &#x26;&#x26; this.response.response) {
    this.config.filesController.expandFilesInObject(this.config, this.response.response);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.validateSchema();
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
  return _this.transformUser();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">expandFilesForExistingObjects</span>();
}).then(function () {
  return _this.runDatabaseOperation();
}).then(function () {
  return _this.createSessionTokenIfNeeded();
}).then(function () {
  return _this.handleFollowup();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.findUsersWithAuthData" id="apidoc.element.parse-server.RestWrite.prototype.findUsersWithAuthData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>findUsersWithAuthData
        <span class="apidocSignatureSpan">(authData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findUsersWithAuthData = function (authData) {
  var providers = Object.keys(authData);
  var query = providers.reduce(function (memo, provider) {
    if (!authData[provider]) {
      return memo;
    }
    var queryKey = &#x27;authData.&#x27; + provider + &#x27;.id&#x27;;
    var query = {};
    query[queryKey] = authData[provider].id;
    memo.push(query);
    return memo;
  }, []).filter(function (q) {
    return typeof q !== &#x27;undefined&#x27;;
  });

  var findPromise = Promise.resolve([]);
  if (query.length &#x3e; 0) {
    findPromise = this.config.database.find(this.className, { &#x27;$or&#x27;: query }, {});
  }

  return findPromise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

RestWrite.prototype.handleAuthData = function (authData) {
var _this6 = this;

var results = void 0;
return this.handleAuthDataValidation(authData).then(function () {
  return _this6.<span class="apidocCodeKeywordSpan">findUsersWithAuthData</span>(authData);
}).then(function (r) {
  results = r;
  if (results.length &#x3e; 1) {
    // More than 1 user with the passed id&#x27;s
    throw new Parse.Error(Parse.Error.ACCOUNT_ALREADY_LINKED, &#x27;this auth is already used&#x27;);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.getUserAndRoleACL" id="apidoc.element.parse-server.RestWrite.prototype.getUserAndRoleACL">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>getUserAndRoleACL
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAndRoleACL = function () {
  var _this2 = this;

  if (this.auth.isMaster) {
    return Promise.resolve();
  }

  this.runOptions.acl = [&#x27;*&#x27;];

  if (this.auth.user) {
    return this.auth.getUserRoles().then(function (roles) {
      roles.push(_this2.auth.user.id);
      _this2.runOptions.acl = _this2.runOptions.acl.concat(roles);
      return;
    });
  } else {
    return Promise.resolve();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

RestQuery.prototype.buildRestWhere = function () {
var _this2 = this;

return Promise.resolve().then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">getUserAndRoleACL</span>();
}).then(function () {
  return _this2.redirectClassNameForKey();
}).then(function () {
  return _this2.validateClientClassCreation();
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.handleAuthData" id="apidoc.element.parse-server.RestWrite.prototype.handleAuthData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleAuthData
        <span class="apidocSignatureSpan">(authData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleAuthData = function (authData) {
  var _this6 = this;

  var results = void 0;
  return this.handleAuthDataValidation(authData).then(function () {
    return _this6.findUsersWithAuthData(authData);
  }).then(function (r) {
    results = r;
    if (results.length &#x3e; 1) {
      // More than 1 user with the passed id&#x27;s
      throw new Parse.Error(Parse.Error.ACCOUNT_ALREADY_LINKED, &#x27;this auth is already used&#x27;);
    }

    _this6.storage[&#x27;authProvider&#x27;] = Object.keys(authData).join(&#x27;,&#x27;);

    if (results.length &#x3e; 0) {
      if (!_this6.query) {
        // Login with auth data
        delete results[0].password;
        var userResult = results[0];

        // need to set the objectId first otherwise location has trailing undefined
        _this6.data.objectId = userResult.objectId;

        // Determine if authData was updated
        var mutatedAuthData = {};
        Object.keys(authData).forEach(function (provider) {
          var providerData = authData[provider];
          var userAuthData = userResult.authData[provider];
          if (!_lodash2.default.isEqual(providerData, userAuthData)) {
            mutatedAuthData[provider] = providerData;
          }
        });

        _this6.response = {
          response: userResult,
          location: _this6.location()
        };

        // We have authData that is updated on login
        // that can happen when token are refreshed,
        // We should update the token and let the user in
        if (Object.keys(mutatedAuthData).length &#x3e; 0) {
          // Assign the new authData in the response
          Object.keys(mutatedAuthData).forEach(function (provider) {
            _this6.response.response.authData[provider] = mutatedAuthData[provider];
          });
          // Run the DB update directly, as &#x27;master&#x27;
          // Just update the authData part
          return _this6.config.database.update(_this6.className, { objectId: _this6.data.objectId }, { authData: mutatedAuthData
 }, {});
        }
        return;
      } else if (_this6.query &#x26;&#x26; _this6.query.objectId) {
        // Trying to update auth data but users
        // are different
        if (results[0].objectId !== _this6.query.objectId) {
          throw new Parse.Error(Parse.Error.ACCOUNT_ALREADY_LINKED, &#x27;this auth is already used&#x27;);
        }
      }
    }
    return;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (providers.length &#x3e; 0) {
  var canHandleAuthData = providers.reduce(function (canHandle, provider) {
    var providerAuthData = authData[provider];
    var hasToken = providerAuthData &#x26;&#x26; providerAuthData.id;
    return canHandle &#x26;&#x26; (hasToken || providerAuthData == null);
  }, true);
  if (canHandleAuthData) {
    return this.<span class="apidocCodeKeywordSpan">handleAuthData</span>(authData);
  }
}
throw new Parse.Error(Parse.Error.UNSUPPORTED_SERVICE, &#x27;This authentication method is unsupported.&#x27;);
};

RestWrite.prototype.handleAuthDataValidation = function (authData) {
var _this5 = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.handleAuthDataValidation" id="apidoc.element.parse-server.RestWrite.prototype.handleAuthDataValidation">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleAuthDataValidation
        <span class="apidocSignatureSpan">(authData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleAuthDataValidation = function (authData) {
  var _this5 = this;

  var validations = Object.keys(authData).map(function (provider) {
    if (authData[provider] === null) {
      return Promise.resolve();
    }
    var validateAuthData = _this5.config.authDataManager.getValidatorForProvider(provider);
    if (!validateAuthData) {
      throw new Parse.Error(Parse.Error.UNSUPPORTED_SERVICE, &#x27;This authentication method is unsupported.&#x27;);
    }
    return validateAuthData(authData[provider]);
  });
  return Promise.all(validations);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return findPromise;
};

RestWrite.prototype.handleAuthData = function (authData) {
var _this6 = this;

var results = void 0;
return this.<span class="apidocCodeKeywordSpan">handleAuthDataValidation</span>(authData).then(function () {
  return _this6.findUsersWithAuthData(authData);
}).then(function (r) {
  results = r;
  if (results.length &#x3e; 1) {
    // More than 1 user with the passed id&#x27;s
    throw new Parse.Error(Parse.Error.ACCOUNT_ALREADY_LINKED, &#x27;this auth is already used&#x27;);
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.handleFollowup" id="apidoc.element.parse-server.RestWrite.prototype.handleFollowup">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleFollowup
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleFollowup = function () {
  if (this.storage &#x26;&#x26; this.storage[&#x27;clearSessions&#x27;] &#x26;&#x26; this.config.revokeSessionOnPasswordReset) {
    var sessionQuery = {
      user: {
        __type: &#x27;Pointer&#x27;,
        className: &#x27;_User&#x27;,
        objectId: this.objectId()
      }
    };
    delete this.storage[&#x27;clearSessions&#x27;];
    return this.config.database.destroy(&#x27;_Session&#x27;, sessionQuery).then(this.handleFollowup.bind(this));
  }

  if (this.storage &#x26;&#x26; this.storage[&#x27;generateNewSession&#x27;]) {
    delete this.storage[&#x27;generateNewSession&#x27;];
    return this.createSessionToken().then(this.handleFollowup.bind(this));
  }

  if (this.storage &#x26;&#x26; this.storage[&#x27;sendVerificationEmail&#x27;]) {
    delete this.storage[&#x27;sendVerificationEmail&#x27;];
    // Fire and forget!
    this.config.userController.sendVerificationEmail(this.data);
    return this.handleFollowup.bind(this);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
  return _this.runDatabaseOperation();
}).then(function () {
  return _this.createSessionTokenIfNeeded();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">handleFollowup</span>();
}).then(function () {
  return _this.runAfterTrigger();
}).then(function () {
  return _this.cleanUserAuthData();
}).then(function () {
  return _this.response;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.handleInstallation" id="apidoc.element.parse-server.RestWrite.prototype.handleInstallation">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleInstallation
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleInstallation = function () {
  var _this13 = this;

  if (this.response || this.className !== &#x27;_Installation&#x27;) {
    return;
  }

  if (!this.query &#x26;&#x26; !this.data.deviceToken &#x26;&#x26; !this.data.installationId &#x26;&#x26; !this.auth.installationId) {
    throw new Parse.Error(135, &#x27;at least one ID field (deviceToken, installationId) &#x27; + &#x27;must be specified in this operation&#x27;);
  }

  // If the device token is 64 characters long, we assume it is for iOS
  // and lowercase it.
  if (this.data.deviceToken &#x26;&#x26; this.data.deviceToken.length == 64) {
    this.data.deviceToken = this.data.deviceToken.toLowerCase();
  }

  // We lowercase the installationId if present
  if (this.data.installationId) {
    this.data.installationId = this.data.installationId.toLowerCase();
  }

  var installationId = this.data.installationId;

  // If data.installationId is not set and we&#x27;re not master, we can lookup in auth
  if (!installationId &#x26;&#x26; !this.auth.isMaster) {
    installationId = this.auth.installationId;
  }

  if (installationId) {
    installationId = installationId.toLowerCase();
  }

  // Updating _Installation but not updating anything critical
  if (this.query &#x26;&#x26; !this.data.deviceToken &#x26;&#x26; !installationId &#x26;&#x26; !this.data.deviceType) {
    return;
  }

  var promise = Promise.resolve();

  var idMatch; // Will be a match on either objectId or installationId
  var objectIdMatch;
  var installationIdMatch;
  var deviceTokenMatches = [];

  // Instead of issuing 3 reads, let&#x27;s do it with one OR.
  var orQueries = [];
  if (this.query &#x26;&#x26; this.query.objectId) {
    orQueries.push({
      objectId: this.query.objectId
    });
  }
  if (installationId) {
    orQueries.push({
      &#x27;installationId&#x27;: installationId
    });
  }
  if (this.data.deviceToken) {
    orQueries.push({ &#x27;deviceToken&#x27;: this.data.deviceToken });
  }

  if (orQueries.length == 0) {
    return;
  }

  promise = promise.then(function () {
    return _this13.config.database.find(&#x27;_Installation&#x27;, {
      &#x27;$or&#x27;: orQueries
    }, {});
  }).then(function (results) {
    results.forEach(function (result) {
      if (_this13.query &#x26;&#x26; _this13.query.objectId &#x26;&#x26; result.objectId == _this13.query.objectId) {
        objectIdMatch = result;
      }
      if (result.installationId == installationId) {
        installationIdMatch = result;
      }
      if (result.deviceToken == _this13.data.deviceToken) {
        deviceTokenMatches.push(result);
      }
    });

    // Sanity checks when running a query
    if (_this13.query &#x26;&#x26; _this13.query.objectId) {
      if (!objectIdMatch) {
        throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, &#x27;Object not found for update.&#x27;);
      }
      if (_this13.data.installationId &#x26;&#x26; objectIdMatch.installationId &#x26;&#x26; _this13.data.installationId !== objectIdMatch.installationId
) {
        throw new Parse.Error(136, &#x27;installationId may not be changed in this &#x27; + &#x27;operation&#x27;);
      }
      if (_this13.data.deviceToken &#x26;&#x26; objectIdMatch.deviceToken &#x26;&#x26; _this13.data.deviceToken !== objectIdMatch.deviceToken &#x26;&#x26; !_this13
.data.installationId &#x26;&#x26; !objectIdMatch.installationId) {
        throw new Parse.Error(136, &#x27;deviceToken may not be changed in this &#x27; + &#x27;operation&#x27;);
      }
      if (_this13.data.deviceType &#x26;&#x26; _this13.data.deviceType &#x26;&#x26; _this13.data.deviceType !== objectIdMatch.deviceType) {
        throw new Parse.Error(136, &#x27;deviceType may not be changed in this &#x27; + &#x27;operation&#x27;);
      }
    }

    if (_this13.query &#x26;&#x26; _this13.query.objectId &#x26;&#x26; objectIdMatch) {
      idMatch = objectIdMatch;
    }

    if (installationId &#x26;&#x26; installationIdMatch) {
      idMatch = installationIdMatch;
    }
    // need to specify deviceType only if it&#x27;s new
    if (!_this13.query &#x26;&#x26; !_this13.data.deviceType &#x26;&#x26; !idMatch) {
      throw new Parse.Error(135, &#x27;deviceType must be specified in this operation&#x27;);
    }
  }).then(function () {
    if (!idMatch) {
      if (!deviceTokenMatches.length) {
        return;
      } else if (deviceTokenMatches.length == 1 &#x26;&#x26; (!deviceTokenMatches[0][&#x27;installationId&#x27;] || !installationId)) {
        // Single match on device token but none on installationId, and either ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this = this;

return Promise.resolve().then(function () {
  return _this.getUserAndRoleACL();
}).then(function () {
  return _this.validateClientClassCreation();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">handleInstallation</span>();
}).then(function () {
  return _this.handleSession();
}).then(function () {
  return _this.validateAuthData();
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.handleSession" id="apidoc.element.parse-server.RestWrite.prototype.handleSession">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>handleSession
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handleSession = function () {
  var _this12 = this;

  if (this.response || this.className !== &#x27;_Session&#x27;) {
    return;
  }

  if (!this.auth.user &#x26;&#x26; !this.auth.isMaster) {
    throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, &#x27;Session token required.&#x27;);
  }

  // TODO: Verify proper error to throw
  if (this.data.ACL) {
    throw new Parse.Error(Parse.Error.INVALID_KEY_NAME, &#x27;Cannot set &#x27; + &#x27;ACL on a Session.&#x27;);
  }

  if (!this.query &#x26;&#x26; !this.auth.isMaster) {
    var token = &#x27;r:&#x27; + cryptoUtils.newToken();
    var expiresAt = this.config.generateSessionExpiresAt();
    var sessionData = {
      sessionToken: token,
      user: {
        __type: &#x27;Pointer&#x27;,
        className: &#x27;_User&#x27;,
        objectId: this.auth.user.id
      },
      createdWith: {
        &#x27;action&#x27;: &#x27;create&#x27;
      },
      restricted: true,
      expiresAt: Parse._encode(expiresAt)
    };
    for (var key in this.data) {
      if (key == &#x27;objectId&#x27;) {
        continue;
      }
      sessionData[key] = this.data[key];
    }
    var create = new RestWrite(this.config, Auth.master(this.config), &#x27;_Session&#x27;, null, sessionData);
    return create.execute().then(function (results) {
      if (!results.response) {
        throw new Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, &#x27;Error creating session.&#x27;);
      }
      sessionData[&#x27;objectId&#x27;] = results.response[&#x27;objectId&#x27;];
      _this12.response = {
        status: 201,
        location: results.location,
        response: sessionData
      };
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return Promise.resolve().then(function () {
  return _this.getUserAndRoleACL();
}).then(function () {
  return _this.validateClientClassCreation();
}).then(function () {
  return _this.handleInstallation();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">handleSession</span>();
}).then(function () {
  return _this.validateAuthData();
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
  return _this.validateSchema();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.location" id="apidoc.element.parse-server.RestWrite.prototype.location">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>location
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">location = function () {
  var middle = this.className === &#x27;_User&#x27; ? &#x27;/users/&#x27; : &#x27;/classes/&#x27; + this.className + &#x27;/&#x27;;
  return this.config.mount + middle + this.data.objectId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!_lodash2.default.isEqual(providerData, userAuthData)) {
    mutatedAuthData[provider] = providerData;
  }
});

_this6.response = {
  response: userResult,
  location: _this6.<span class="apidocCodeKeywordSpan">location</span>()
};

// We have authData that is updated on login
// that can happen when token are refreshed,
// We should update the token and let the user in
if (Object.keys(mutatedAuthData).length &#x3e; 0) {
  // Assign the new authData in the response
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.objectId" id="apidoc.element.parse-server.RestWrite.prototype.objectId">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>objectId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">objectId = function () {
  return this.data.objectId || this.query.objectId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this.query) {
  // If we&#x27;re updating a _User object, we need to clear out the cache for that user. Find all their
  // session tokens, and remove them from the cache.
  promise = new _RestQuery2.default(this.config, Auth.master(this.config), &#x27;_Session&#x27;, {
    user: {
      __type: &#x22;Pointer&#x22;,
      className: &#x22;_User&#x22;,
      objectId: this.<span class="apidocCodeKeywordSpan">objectId</span>()
    }
  }).execute().then(function (results) {
    results.results.forEach(function (session) {
      return _this7.config.cacheController.user.del(session.sessionToken);
    });
  });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.runAfterTrigger" id="apidoc.element.parse-server.RestWrite.prototype.runAfterTrigger">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runAfterTrigger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runAfterTrigger = function () {
  if (!this.response || !this.response.response) {
    return;
  }

  // Avoid doing any setup for triggers if there is no &#x27;afterSave&#x27; trigger for this class.
  var hasAfterSaveHook = triggers.triggerExists(this.className, triggers.Types.afterSave, this.config.applicationId);
  var hasLiveQuery = this.config.liveQueryController.hasLiveQuery(this.className);
  if (!hasAfterSaveHook &#x26;&#x26; !hasLiveQuery) {
    return Promise.resolve();
  }

  var extraData = { className: this.className };
  if (this.query &#x26;&#x26; this.query.objectId) {
    extraData.objectId = this.query.objectId;
  }

  // Build the original object, we only do this for a update write.
  var originalObject = void 0;
  if (this.query &#x26;&#x26; this.query.objectId) {
    originalObject = triggers.inflate(extraData, this.originalData);
  }

  // Build the inflated object, different from beforeSave, originalData is not empty
  // since developers can change data in the beforeSave.
  var updatedObject = triggers.inflate(extraData, this.originalData);
  updatedObject.set(this.sanitizedData());
  updatedObject._handleSaveResponse(this.response.response, this.response.status || 200);

  // Notifiy LiveQueryServer if possible
  this.config.liveQueryController.onAfterSave(updatedObject.className, updatedObject, originalObject);

  // Run afterSave trigger
  return triggers.maybeRunTrigger(triggers.Types.afterSave, this.auth, updatedObject, originalObject, this.config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }).then(function () {
    return _this.runDatabaseOperation();
  }).then(function () {
    return _this.createSessionTokenIfNeeded();
  }).then(function () {
    return _this.handleFollowup();
  }).then(function () {
    return _this.<span class="apidocCodeKeywordSpan">runAfterTrigger</span>();
  }).then(function () {
    return _this.cleanUserAuthData();
  }).then(function () {
    return _this.response;
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.runBeforeTrigger" id="apidoc.element.parse-server.RestWrite.prototype.runBeforeTrigger">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runBeforeTrigger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runBeforeTrigger = function () {
  var _this4 = this;

  if (this.response) {
    return;
  }

  // Avoid doing any setup for triggers if there is no &#x27;beforeSave&#x27; trigger for this class.
  if (!triggers.triggerExists(this.className, triggers.Types.beforeSave, this.config.applicationId)) {
    return Promise.resolve();
  }

  // Cloud code gets a bit of extra data for its objects
  var extraData = { className: this.className };
  if (this.query &#x26;&#x26; this.query.objectId) {
    extraData.objectId = this.query.objectId;
  }

  var originalObject = null;
  var updatedObject = triggers.inflate(extraData, this.originalData);
  if (this.query &#x26;&#x26; this.query.objectId) {
    // This is an update for existing object.
    originalObject = triggers.inflate(extraData, this.originalData);
  }
  updatedObject.set(this.sanitizedData());

  return Promise.resolve().then(function () {
    return triggers.maybeRunTrigger(triggers.Types.beforeSave, _this4.auth, updatedObject, originalObject, _this4.config);
  }).then(function (response) {
    if (response &#x26;&#x26; response.object) {
      _this4.storage.fieldsChangedByTrigger = _lodash2.default.reduce(response.object, function (result, value, key) {
        if (!_lodash2.default.isEqual(_this4.data[key], value)) {
          result.push(key);
        }
        return result;
      }, []);
      _this4.data = response.object;
      // We should delete the objectId for an update write
      if (_this4.query &#x26;&#x26; _this4.query.objectId) {
        delete _this4.data.objectId;
      }
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.handleInstallation();
}).then(function () {
  return _this.handleSession();
}).then(function () {
  return _this.validateAuthData();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">runBeforeTrigger</span>();
}).then(function () {
  return _this.validateSchema();
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
  return _this.transformUser();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.runDatabaseOperation" id="apidoc.element.parse-server.RestWrite.prototype.runDatabaseOperation">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>runDatabaseOperation
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runDatabaseOperation = function () {
  var _this14 = this;

  if (this.response) {
    return;
  }

  if (this.className === &#x27;_Role&#x27;) {
    this.config.cacheController.role.clear();
  }

  if (this.className === &#x27;_User&#x27; &#x26;&#x26; this.query &#x26;&#x26; !this.auth.couldUpdateUserId(this.query.objectId)) {
    throw new Parse.Error(Parse.Error.SESSION_MISSING, &#x27;Cannot modify user &#x27; + this.query.objectId + &#x27;.&#x27;);
  }

  if (this.className === &#x27;_Product&#x27; &#x26;&#x26; this.data.download) {
    this.data.downloadName = this.data.download.name;
  }

  // TODO: Add better detection for ACL, ensuring a user can&#x27;t be locked from
  //       their own user record.
  if (this.data.ACL &#x26;&#x26; this.data.ACL[&#x27;*unresolved&#x27;]) {
    throw new Parse.Error(Parse.Error.INVALID_ACL, &#x27;Invalid ACL.&#x27;);
  }

  if (this.query) {
    // Force the user to not lockout
    // Matched with parse.com
    if (this.className === &#x27;_User&#x27; &#x26;&#x26; this.data.ACL) {
      this.data.ACL[this.query.objectId] = { read: true, write: true };
    }
    // update password timestamp if user password is being changed
    if (this.className === &#x27;_User&#x27; &#x26;&#x26; this.data._hashed_password &#x26;&#x26; this.config.passwordPolicy &#x26;&#x26; this.config.passwordPolicy.maxPasswordAge
) {
      this.data._password_changed_at = Parse._encode(new Date());
    }
    // Ignore createdAt when update
    delete this.data.createdAt;

    var defer = Promise.resolve();
    // if password history is enabled then save the current password to history
    if (this.className === &#x27;_User&#x27; &#x26;&#x26; this.data._hashed_password &#x26;&#x26; this.config.passwordPolicy &#x26;&#x26; this.config.passwordPolicy.maxPasswordHistory
) {
      defer = this.config.database.find(&#x27;_User&#x27;, { objectId: this.objectId() }, { keys: [&#x22;_password_history&#x22;, &#x22;_hashed_password&#x22;] }).
then(function (results) {
        if (results.length != 1) {
          throw undefined;
        }
        var user = results[0];
        var oldPasswords = [];
        if (user._password_history) {
          oldPasswords = _lodash2.default.take(user._password_history, _this14.config.passwordPolicy.maxPasswordHistory);
        }
        //n-1 passwords go into history including last password
        while (oldPasswords.length &#x3e; _this14.config.passwordPolicy.maxPasswordHistory - 2) {
          oldPasswords.shift();
        }
        oldPasswords.push(user.password);
        _this14.data._password_history = oldPasswords;
      });
    }

    return defer.then(function () {
      // Run an update
      return _this14.config.database.update(_this14.className, _this14.query, _this14.data, _this14.runOptions).then(function (response
) {
        response.updatedAt = _this14.updatedAt;
        _this14._updateResponseWithData(response, _this14.data);
        _this14.response = { response: response };
      });
    });
  } else {
    // Set the default ACL and password timestamp for the new _User
    if (this.className === &#x27;_User&#x27;) {
      var ACL = this.data.ACL;
      // default public r/w ACL
      if (!ACL) {
        ACL = {};
        ACL[&#x27;*&#x27;] = { read: true, write: false };
      }
      // make sure the user is not locked down
      ACL[this.data.objectId] = { read: true, write: true };
      this.data.ACL = ACL;
      // password timestamp to be used when password expiry policy is enforced
      if (this.config.passwordPolicy &#x26;&#x26; this.config.passwordPolicy.maxPasswordAge) {
        this.data._password_changed_at = Parse._encode(new Date());
      }
    }

    // Run a create
    return this.config.database.create(this.className, this.data, this.runOptions).catch(function (error) {
      if (_this14.className !== &#x27;_User&#x27; || error.code !== Parse.Error.DUPLICATE_VALUE) {
        throw error;
      }
      // If this was a failed user creation due to username or email already taken, we need to
      // check whether it was username or email and return the appropriate error.

      // TODO: See if we can later do this without additional queries by using named indexes.
      return _this14.config.database.find(_this14.className, { username: _this14.data.username, objectId: { &#x27;$ne&#x27;: _this14.objectId
() } }, { limit: 1 }).then(function (results) {
        if ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
  return _this.transformUser();
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">runDatabaseOperation</span>();
}).then(function () {
  return _this.createSessionTokenIfNeeded();
}).then(function () {
  return _this.handleFollowup();
}).then(function () {
  return _this.runAfterTrigger();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.sanitizedData" id="apidoc.element.parse-server.RestWrite.prototype.sanitizedData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>sanitizedData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sanitizedData = function () {
  var data = Object.keys(this.data).reduce(function (data, key) {
    // Regexp comes from Parse.Object.prototype.validate
    if (!/^[A-Za-z][0-9A-Za-z_]*$/.test(key)) {
      delete data[key];
    }
    return data;
  }, deepcopy(this.data));
  return Parse._decode(undefined, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var originalObject = null;
var updatedObject = triggers.inflate(extraData, this.originalData);
if (this.query &#x26;&#x26; this.query.objectId) {
  // This is an update for existing object.
  originalObject = triggers.inflate(extraData, this.originalData);
}
updatedObject.set(this.<span class="apidocCodeKeywordSpan">sanitizedData</span>());

return Promise.resolve().then(function () {
  return triggers.maybeRunTrigger(triggers.Types.beforeSave, _this4.auth, updatedObject, originalObject, _this4.config);
}).then(function (response) {
  if (response &#x26;&#x26; response.object) {
    _this4.storage.fieldsChangedByTrigger = _lodash2.default.reduce(response.object, function (result, value, key) {
      if (!_lodash2.default.isEqual(_this4.data[key], value)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.setRequiredFieldsIfNeeded" id="apidoc.element.parse-server.RestWrite.prototype.setRequiredFieldsIfNeeded">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>setRequiredFieldsIfNeeded
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setRequiredFieldsIfNeeded = function () {
  if (this.data) {
    // Add default fields
    this.data.updatedAt = this.updatedAt;
    if (!this.query) {
      this.data.createdAt = this.updatedAt;

      // Only assign new objectId if we are creating new object
      if (!this.data.objectId) {
        this.data.objectId = cryptoUtils.newObjectId();
      }
    }
  }
  return Promise.resolve();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.validateAuthData();
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
  return _this.validateSchema();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">setRequiredFieldsIfNeeded</span>();
}).then(function () {
  return _this.transformUser();
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
  return _this.runDatabaseOperation();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.transformUser" id="apidoc.element.parse-server.RestWrite.prototype.transformUser">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>transformUser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformUser = function () {
  var _this7 = this;

  var promise = Promise.resolve();

  if (this.className !== &#x27;_User&#x27;) {
    return promise;
  }

  if (this.query) {
    // If we&#x27;re updating a _User object, we need to clear out the cache for that user. Find all their
    // session tokens, and remove them from the cache.
    promise = new _RestQuery2.default(this.config, Auth.master(this.config), &#x27;_Session&#x27;, {
      user: {
        __type: &#x22;Pointer&#x22;,
        className: &#x22;_User&#x22;,
        objectId: this.objectId()
      }
    }).execute().then(function (results) {
      results.results.forEach(function (session) {
        return _this7.config.cacheController.user.del(session.sessionToken);
      });
    });
  }

  return promise.then(function () {
    // Transform the password
    if (_this7.data.password === undefined) {
      // ignore only if undefined. should proceed if empty (&#x27;&#x27;)
      return Promise.resolve();
    }

    if (_this7.query &#x26;&#x26; !_this7.auth.isMaster) {
      _this7.storage[&#x27;clearSessions&#x27;] = true;
      _this7.storage[&#x27;generateNewSession&#x27;] = true;
    }

    return _this7._validatePasswordPolicy().then(function () {
      return passwordCrypto.hash(_this7.data.password).then(function (hashedPassword) {
        _this7.data._hashed_password = hashedPassword;
        delete _this7.data.password;
      });
    });
  }).then(function () {
    return _this7._validateUserName();
  }).then(function () {
    return _this7._validateEmail();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
  return _this.validateSchema();
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">transformUser</span>();
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
  return _this.runDatabaseOperation();
}).then(function () {
  return _this.createSessionTokenIfNeeded();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.validateAuthData" id="apidoc.element.parse-server.RestWrite.prototype.validateAuthData">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateAuthData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateAuthData = function () {
  if (this.className !== &#x27;_User&#x27;) {
    return;
  }

  if (!this.query &#x26;&#x26; !this.data.authData) {
    if (typeof this.data.username !== &#x27;string&#x27;) {
      throw new Parse.Error(Parse.Error.USERNAME_MISSING, &#x27;bad or missing username&#x27;);
    }
    if (typeof this.data.password !== &#x27;string&#x27;) {
      throw new Parse.Error(Parse.Error.PASSWORD_MISSING, &#x27;password is required&#x27;);
    }
  }

  if (!this.data.authData || !Object.keys(this.data.authData).length) {
    return;
  }

  var authData = this.data.authData;
  var providers = Object.keys(authData);
  if (providers.length &#x3e; 0) {
    var canHandleAuthData = providers.reduce(function (canHandle, provider) {
      var providerAuthData = authData[provider];
      var hasToken = providerAuthData &#x26;&#x26; providerAuthData.id;
      return canHandle &#x26;&#x26; (hasToken || providerAuthData == null);
    }, true);
    if (canHandleAuthData) {
      return this.handleAuthData(authData);
    }
  }
  throw new Parse.Error(Parse.Error.UNSUPPORTED_SERVICE, &#x27;This authentication method is unsupported.&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.validateClientClassCreation();
}).then(function () {
  return _this.handleInstallation();
}).then(function () {
  return _this.handleSession();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">validateAuthData</span>();
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
  return _this.validateSchema();
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.validateClientClassCreation" id="apidoc.element.parse-server.RestWrite.prototype.validateClientClassCreation">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateClientClassCreation
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateClientClassCreation = function () {
  var _this3 = this;

  if (this.config.allowClientClassCreation === false &#x26;&#x26; !this.auth.isMaster &#x26;&#x26; SchemaController.systemClasses.indexOf(this.className
) === -1) {
    return this.config.database.loadSchema().then(function (schemaController) {
      return schemaController.hasClass(_this3.className);
    }).then(function (hasClass) {
      if (hasClass !== true) {
        throw new Parse.Error(Parse.Error.OPERATION_FORBIDDEN, &#x27;This user is not allowed to access &#x27; + &#x27;non-existent class: &#x27; +
_this3.className);
      }
    });
  } else {
    return Promise.resolve();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var _this2 = this;

return Promise.resolve().then(function () {
  return _this2.getUserAndRoleACL();
}).then(function () {
  return _this2.redirectClassNameForKey();
}).then(function () {
  return _this2.<span class="apidocCodeKeywordSpan">validateClientClassCreation</span>();
}).then(function () {
  return _this2.replaceSelect();
}).then(function () {
  return _this2.replaceDontSelect();
}).then(function () {
  return _this2.replaceInQuery();
}).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.RestWrite.prototype.validateSchema" id="apidoc.element.parse-server.RestWrite.prototype.validateSchema">
        function <span class="apidocSignatureSpan">parse-server.RestWrite.prototype.</span>validateSchema
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateSchema = function () {
  return this.config.database.validateObject(this.className, this.data, this.query, this.runOptions);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}).then(function () {
  return _this.handleSession();
}).then(function () {
  return _this.validateAuthData();
}).then(function () {
  return _this.runBeforeTrigger();
}).then(function () {
  return _this.<span class="apidocCodeKeywordSpan">validateSchema</span>();
}).then(function () {
  return _this.setRequiredFieldsIfNeeded();
}).then(function () {
  return _this.transformUser();
}).then(function () {
  return _this.expandFilesForExistingObjects();
}).then(function () {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.S3Adapter" id="apidoc.module.parse-server.S3Adapter">module parse-server.S3Adapter</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.S3Adapter" id="apidoc.element.parse-server.S3Adapter.S3Adapter">
        function <span class="apidocSignatureSpan">parse-server.</span>S3Adapter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function S3Adapter() {
  var options = optionsFromArguments(arguments);
  this._region = options.region;
  this._bucket = options.bucket;
  this._bucketPrefix = options.bucketPrefix;
  this._directAccess = options.directAccess;
  this._baseUrl = options.baseUrl;
  this._baseUrlDirect = options.baseUrlDirect;
  this._signatureVersion = options.signatureVersion;
  this._globalCacheControl = options.globalCacheControl;

  let s3Options = {
    params: { Bucket: this._bucket },
    region: this._region,
    signatureVersion: this._signatureVersion,
    globalCacheControl: this._globalCacheControl
  };

  if (options.accessKey &#x26;&#x26; options.secretKey) {
    s3Options.accessKeyId = options.accessKey;
    s3Options.secretAccessKey = options.secretKey;
  }

  Object.assign(s3Options, options.s3overrides);

  this._s3Client = new AWS.S3(s3Options);
  this._hasBucket = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.default" id="apidoc.element.parse-server.S3Adapter.default">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.</span>default
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function S3Adapter() {
  var options = optionsFromArguments(arguments);
  this._region = options.region;
  this._bucket = options.bucket;
  this._bucketPrefix = options.bucketPrefix;
  this._directAccess = options.directAccess;
  this._baseUrl = options.baseUrl;
  this._baseUrlDirect = options.baseUrlDirect;
  this._signatureVersion = options.signatureVersion;
  this._globalCacheControl = options.globalCacheControl;

  let s3Options = {
    params: { Bucket: this._bucket },
    region: this._region,
    signatureVersion: this._signatureVersion,
    globalCacheControl: this._globalCacheControl
  };

  if (options.accessKey &#x26;&#x26; options.secretKey) {
    s3Options.accessKeyId = options.accessKey;
    s3Options.secretAccessKey = options.secretKey;
  }

  Object.assign(s3Options, options.s3overrides);

  this._s3Client = new AWS.S3(s3Options);
  this._hasBucket = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.S3Adapter.prototype" id="apidoc.module.parse-server.S3Adapter.prototype">module parse-server.S3Adapter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.prototype.createBucket" id="apidoc.element.parse-server.S3Adapter.prototype.createBucket">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>createBucket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createBucket = function () {
  var promise;
  if (this._hasBucket) {
    promise = Promise.resolve();
  } else {
    promise = new Promise((resolve) =&#x3e; {
      this._s3Client.createBucket(() =&#x3e; {
        this._hasBucket = true;
        resolve();
      });
    });
  }
  return promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.prototype.createFile" id="apidoc.element.parse-server.S3Adapter.prototype.createFile">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>createFile
        <span class="apidocSignatureSpan">(filename, data, contentType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createFile = function (filename, data, contentType) {
  let params = {
    Key: this._bucketPrefix + filename,
    Body: data
  };
  if (this._directAccess) {
    params.ACL = &#x22;public-read&#x22;
  }
  if (contentType) {
    params.ContentType = contentType;
  }
  if(this._globalCacheControl) {
    params.CacheControl = this._globalCacheControl;
  }
  return this.createBucket().then(() =&#x3e; {
    return new Promise((resolve, reject) =&#x3e; {
      this._s3Client.upload(params, (err, data) =&#x3e; {
        if (err !== null) {
          return reject(err);
        }
        resolve(data);
      });
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.prototype.deleteFile" id="apidoc.element.parse-server.S3Adapter.prototype.deleteFile">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>deleteFile
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteFile = function (filename) {
  return this.createBucket().then(() =&#x3e; {
    return new Promise((resolve, reject) =&#x3e; {
      let params = {
        Key: this._bucketPrefix + filename
      };
      this._s3Client.deleteObject(params, (err, data) =&#x3e;{
        if(err !== null) {
          return reject(err);
        }
        resolve(data);
      });
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.prototype.getFileData" id="apidoc.element.parse-server.S3Adapter.prototype.getFileData">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>getFileData
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFileData = function (filename) {
  let params = {Key: this._bucketPrefix + filename};
  return this.createBucket().then(() =&#x3e; {
    return new Promise((resolve, reject) =&#x3e; {
      this._s3Client.getObject(params, (err, data) =&#x3e; {
        if (err !== null) {
          return reject(err);
        }
        // Something happened here...
        if (data &#x26;&#x26; !data.Body) {
          return reject(data);
        }
        resolve(data.Body);
      });
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.S3Adapter.prototype.getFileLocation" id="apidoc.element.parse-server.S3Adapter.prototype.getFileLocation">
        function <span class="apidocSignatureSpan">parse-server.S3Adapter.prototype.</span>getFileLocation
        <span class="apidocSignatureSpan">(config, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFileLocation = function (config, filename) {
  filename = encodeURIComponent(filename);
  if (this._directAccess) {
    if (this._baseUrl &#x26;&#x26; this._baseUrlDirect) {
      return `${this._baseUrl}/${filename}`;
    } else if (this._baseUrl) {
      return `${this._baseUrl}/${this._bucketPrefix + filename}`;
    } else {
      return `https://${this._bucket}.s3.amazonaws.com/${this._bucketPrefix + filename}`;
    }
  }
  return (config.mount + &#x27;/files/&#x27; + config.applicationId + &#x27;/&#x27; + filename);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.StatusHandler" id="apidoc.module.parse-server.StatusHandler">module parse-server.StatusHandler</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.StatusHandler.flatten" id="apidoc.element.parse-server.StatusHandler.flatten">
        function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>flatten
        <span class="apidocSignatureSpan">(array)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function flatten(array) {
  var flattened = [];
  for (var i = 0; i &#x3c; array.length; i++) {
    if (Array.isArray(array[i])) {
      flattened = flattened.concat(flatten(array[i]));
    } else {
      flattened.push(array[i]);
    }
  }
  return flattened;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.StatusHandler.jobStatusHandler" id="apidoc.element.parse-server.StatusHandler.jobStatusHandler">
        function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>jobStatusHandler
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jobStatusHandler(config) {
  var jobStatus = void 0;
  var objectId = (0, _cryptoUtils.newObjectId)();
  var database = config.database;
  var handler = statusHandler(JOB_STATUS_COLLECTION, database);
  var setRunning = function setRunning(jobName, params) {
    var now = new Date();
    jobStatus = {
      objectId: objectId,
      jobName: jobName,
      params: params,
      status: &#x27;running&#x27;,
      source: &#x27;api&#x27;,
      createdAt: now,
      // lockdown!
      ACL: {}
    };

    return handler.create(jobStatus);
  };

  var setMessage = function setMessage(message) {
    if (!message || typeof message !== &#x27;string&#x27;) {
      return Promise.resolve();
    }
    return handler.update({ objectId: objectId }, { message: message });
  };

  var setSucceeded = function setSucceeded(message) {
    return setFinalStatus(&#x27;succeeded&#x27;, message);
  };

  var setFailed = function setFailed(message) {
    return setFinalStatus(&#x27;failed&#x27;, message);
  };

  var setFinalStatus = function setFinalStatus(status) {
    var message = arguments.length &#x3e; 1 &#x26;&#x26; arguments[1] !== undefined ? arguments[1] : undefined;

    var finishedAt = new Date();
    var update = { status: status, finishedAt: finishedAt };
    if (message &#x26;&#x26; typeof message === &#x27;string&#x27;) {
      update.message = message;
    }
    return handler.update({ objectId: objectId }, update);
  };

  return Object.freeze({
    setRunning: setRunning,
    setSucceeded: setSucceeded,
    setMessage: setMessage,
    setFailed: setFailed
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.StatusHandler.pushStatusHandler" id="apidoc.element.parse-server.StatusHandler.pushStatusHandler">
        function <span class="apidocSignatureSpan">parse-server.StatusHandler.</span>pushStatusHandler
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pushStatusHandler(config) {
  var objectId = arguments.length &#x3e; 1 &#x26;&#x26; arguments[1] !== undefined ? arguments[1] : (0, _cryptoUtils.newObjectId)();


  var pushStatus = void 0;
  var database = config.database;
  var handler = statusHandler(PUSH_STATUS_COLLECTION, database);
  var setInitial = function setInitial() {
    var body = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {};
    var where = arguments[1];
    var options = arguments.length &#x3e; 2 &#x26;&#x26; arguments[2] !== undefined ? arguments[2] : { source: &#x27;rest&#x27; };

    var now = new Date();
    var data = body.data || {};
    var payloadString = JSON.stringify(data);
    var pushHash = void 0;
    if (typeof data.alert === &#x27;string&#x27;) {
      pushHash = (0, _cryptoUtils.md5Hash)(data.alert);
    } else if (_typeof(data.alert) === &#x27;object&#x27;) {
      pushHash = (0, _cryptoUtils.md5Hash)(JSON.stringify(data.alert));
    } else {
      pushHash = &#x27;d41d8cd98f00b204e9800998ecf8427e&#x27;;
    }
    var object = {
      objectId: objectId,
      createdAt: now,
      pushTime: now.toISOString(),
      query: JSON.stringify(where),
      payload: payloadString,
      source: options.source,
      title: options.title,
      expiry: body.expiration_time,
      status: &#x22;pending&#x22;,
      numSent: 0,
      pushHash: pushHash,
      // lockdown!
      ACL: {}
    };

    return handler.create(object).then(function () {
      pushStatus = {
        objectId: objectId
      };
      return Promise.resolve(pushStatus);
    });
  };

  var setRunning = function setRunning(count) {
    _logger.logger.verbose(&#x27;_PushStatus &#x27; + objectId + &#x27;: sending push to %d installations&#x27;, count);
    return handler.update({ status: &#x22;pending&#x22;, objectId: objectId }, { status: &#x22;running&#x22;, updatedAt: new Date(), count: count });
  };

  var trackSent = function trackSent(results) {
    var _this = this;

    var update = {
      updatedAt: new Date(),
      numSent: 0,
      numFailed: 0
    };
    if (Array.isArray(results)) {
      results = flatten(results);
      results.reduce(function (memo, result) {
        // Cannot handle that
        if (!result || !result.device || !result.device.deviceType) {
          return memo;
        }
        var deviceType = result.device.deviceType;
        var key = result.transmitted ? &#x27;sentPerType.&#x27; + deviceType : &#x27;failedPerType.&#x27; + deviceType;
        memo[key] = incrementOp(memo, key);
        if (result.transmitted) {
          memo.numSent++;
        } else {
          memo.numFailed++;
        }
        return memo;
      }, update);
      incrementOp(update, &#x27;count&#x27;, -results.length);
    }

    _logger.logger.verbose(&#x27;_PushStatus &#x27; + objectId + &#x27;: sent push! %d success, %d failures&#x27;, update.numSent, update.numFailed);

    [&#x27;numSent&#x27;, &#x27;numFailed&#x27;].forEach(function (key) {
      if (update[key] &#x3e; 0) {
        update[key] = {
          __op: &#x27;Increment&#x27;,
          amount: update[key]
        };
      } else {
        delete update[key];
      }
    });

    return handler.update({ objectId: objectId }, update).then(function (res) {
      if (res &#x26;&#x26; res.count === 0) {
        return _this.complete();
      }
    });
  };

  var complete = function complete() {
    return handler.update({ objectId: objectId }, {
      status: &#x27;succeeded&#x27;,
      count: { __op: &#x27;Delete&#x27; },
      updatedAt: new Date()
    });
  };

  var fail = function fail(err) {
    var update = {
      errorMessage: JSON.stringify(err),
      status: &#x27;failed&#x27;,
      updatedAt: new Date()
    };
    _logger.logger.warn(&#x27;_PushStatus &#x27; + objectId + &#x27;: error while sending push&#x27;, err);
    return handler.update({ objectId: objectId }, update);
  };

  return Object.freeze({
    objectId: objectId,
    setInitial: setInitial,
    setRunning: setRunning,
    trackSent: trackSent,
    complete: complete,
    fail: fail
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.TestUtils" id="apidoc.module.parse-server.TestUtils">module parse-server.TestUtils</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.TestUtils.destroyAllDataPermanently" id="apidoc.element.parse-server.TestUtils.destroyAllDataPermanently">
        function <span class="apidocSignatureSpan">parse-server.TestUtils.</span>destroyAllDataPermanently
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroyAllDataPermanently() {
  if (!process.env.TESTING) {
    throw &#x27;Only supported in test environment&#x27;;
  }
  return Promise.all(Object.keys(_cache2.default.cache).map(function (appId) {
    var app = _cache2.default.get(appId);
    if (app.databaseController) {
      return app.databaseController.deleteEverything();
    } else {
      return Promise.resolve();
    }
  }));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.batch" id="apidoc.module.parse-server.batch">module parse-server.batch</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.batch.makeBatchRoutingPathFunction" id="apidoc.element.parse-server.batch.makeBatchRoutingPathFunction">
        function <span class="apidocSignatureSpan">parse-server.batch.</span>makeBatchRoutingPathFunction
        <span class="apidocSignatureSpan">(originalUrl, serverURL, publicServerURL)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeBatchRoutingPathFunction(originalUrl, serverURL, publicServerURL) {
  serverURL = serverURL ? parseURL(serverURL) : undefined;
  publicServerURL = publicServerURL ? parseURL(publicServerURL) : undefined;

  var apiPrefixLength = originalUrl.length - batchPath.length;
  var apiPrefix = originalUrl.slice(0, apiPrefixLength);

  var makeRoutablePath = function makeRoutablePath(requestPath) {
    // The routablePath is the path minus the api prefix
    if (requestPath.slice(0, apiPrefix.length) != apiPrefix) {
      throw new Parse.Error(Parse.Error.INVALID_JSON, &#x27;cannot route batch path &#x27; + requestPath);
    }
    return path.posix.join(&#x27;/&#x27;, requestPath.slice(apiPrefix.length));
  };

  if (serverURL &#x26;&#x26; publicServerURL &#x26;&#x26; serverURL.path != publicServerURL.path) {
    var localPath = serverURL.path;
    var publicPath = publicServerURL.path;
    // Override the api prefix
    apiPrefix = localPath;
    return function (requestPath) {
      // Build the new path by removing the public path
      // and joining with the local path
      var newPath = path.posix.join(&#x27;/&#x27;, localPath, &#x27;/&#x27;, requestPath.slice(publicPath.length));
      // Use the method for local routing
      return makeRoutablePath(newPath);
    };
  }

  return makeRoutablePath;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.batch.mountOnto" id="apidoc.element.parse-server.batch.mountOnto">
        function <span class="apidocSignatureSpan">parse-server.batch.</span>mountOnto
        <span class="apidocSignatureSpan">(router)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function mountOnto(router) {
  router.route(&#x27;POST&#x27;, batchPath, function (req) {
    return handleBatch(router, req);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    var routes = routers.reduce(function (memo, router) {
      return memo.concat(router.routes);
    }, []);

    var appRouter = new _PromiseRouter2.default(routes, appId);

    batch.<span class="apidocCodeKeywordSpan">mountOnto</span>(appRouter);
    return appRouter;
  }
}, {
  key: &#x27;createLiveQueryServer&#x27;,
  value: function createLiveQueryServer(httpServer, config) {
    return new _ParseLiveQueryServer.ParseLiveQueryServer(httpServer, config);
  }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.cryptoUtils" id="apidoc.module.parse-server.cryptoUtils">module parse-server.cryptoUtils</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.cryptoUtils.md5Hash" id="apidoc.element.parse-server.cryptoUtils.md5Hash">
        function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>md5Hash
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function md5Hash(string) {
  return (0, _crypto.createHash)(&#x27;md5&#x27;).update(string).digest(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.cryptoUtils.newObjectId" id="apidoc.element.parse-server.cryptoUtils.newObjectId">
        function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>newObjectId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function newObjectId() {
  //TODO: increase length to better protect against collisions.
  return randomString(10);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Add default fields
    this.data.updatedAt = this.updatedAt;
    if (!this.query) {
      this.data.createdAt = this.updatedAt;

      // Only assign new objectId if we are creating new object
      if (!this.data.objectId) {
        this.data.objectId = cryptoUtils.<span class="apidocCodeKeywordSpan">newObjectId</span>();
      }
    }
  }
  return Promise.resolve();
};

// Transforms auth data for a user object.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.cryptoUtils.newToken" id="apidoc.element.parse-server.cryptoUtils.newToken">
        function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>newToken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function newToken() {
  return randomHexString(32);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

RestWrite.prototype.createSessionToken = function () {
// cloud installationId from Cloud Code,
// never create session tokens from there.
if (this.auth.installationId &#x26;&#x26; this.auth.installationId === &#x27;cloud&#x27;) {
  return;
}
var token = &#x27;r:&#x27; + cryptoUtils.<span class="apidocCodeKeywordSpan">newToken</span>();

var expiresAt = this.config.generateSessionExpiresAt();
var sessionData = {
  sessionToken: token,
  user: {
    __type: &#x27;Pointer&#x27;,
    className: &#x27;_User&#x27;,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.cryptoUtils.randomHexString" id="apidoc.element.parse-server.cryptoUtils.randomHexString">
        function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>randomHexString
        <span class="apidocSignatureSpan">(size)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function randomHexString(size) {
  if (size === 0) {
    throw new Error(&#x27;Zero-length randomHexString is useless.&#x27;);
  }
  if (size % 2 !== 0) {
    throw new Error(&#x27;randomHexString size must be divisible by 2.&#x27;);
  }
  return (0, _crypto.randomBytes)(size / 2).toString(&#x27;hex&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.cryptoUtils.randomString" id="apidoc.element.parse-server.cryptoUtils.randomString">
        function <span class="apidocSignatureSpan">parse-server.cryptoUtils.</span>randomString
        <span class="apidocSignatureSpan">(size)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function randomString(size) {
  if (size === 0) {
    throw new Error(&#x27;Zero-length randomString is useless.&#x27;);
  }
  var chars = &#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27; + &#x27;abcdefghijklmnopqrstuvwxyz&#x27; + &#x27;0123456789&#x27;;
  var objectId = &#x27;&#x27;;
  var bytes = (0, _crypto.randomBytes)(size);
  for (var i = 0; i &#x3c; bytes.length; ++i) {
    objectId += chars[bytes.readUInt8(i) % chars.length];
  }
  return objectId;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

RestWrite.prototype._validateUserName = function () {
// Check for username uniqueness
if (!this.data.username) {
  if (!this.query) {
    this.data.username = cryptoUtils.<span class="apidocCodeKeywordSpan">randomString</span>(25);
    this.responseShouldHaveUsername = true;
  }
  return Promise.resolve();
}
// We need to a find to check for duplicate username in case they are missing the unique index on usernames
// TODO: Check if there is a unique index, and if so, skip this query.
return this.config.database.find(this.className, { username: this.data.username, objectId: { &#x27;$ne&#x27;: this.objectId() } }, {
limit: 1 }).then(function (results) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.deprecated" id="apidoc.module.parse-server.deprecated">module parse-server.deprecated</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.deprecated.useExternal" id="apidoc.element.parse-server.deprecated.useExternal">
        function <span class="apidocSignatureSpan">parse-server.deprecated.</span>useExternal
        <span class="apidocSignatureSpan">(name, moduleName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function useExternal(name, moduleName) {
  return function () {
    throw name + &#x22; is not provided by parse-server anymore; please install &#x22; + moduleName;
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.logger" id="apidoc.module.parse-server.logger">module parse-server.logger</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.logger.getLogger" id="apidoc.element.parse-server.logger.getLogger">
        function <span class="apidocSignatureSpan">parse-server.logger.</span>getLogger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getLogger() {
  return logger;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.logger.setLogger" id="apidoc.element.parse-server.logger.setLogger">
        function <span class="apidocSignatureSpan">parse-server.logger.</span>setLogger
        <span class="apidocSignatureSpan">(aLogger)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setLogger(aLogger) {
  logger = aLogger;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  throw &#x27;When using an explicit database adapter, you must also use an explicit filesAdapter.&#x27;;
}

userSensitiveFields = Array.from(new Set(userSensitiveFields.concat(_defaults2.default.userSensitiveFields, userSensitiveFields)));

var loggerControllerAdapter = (0, _AdapterLoader.loadAdapter)(loggerAdapter, _WinstonLoggerAdapter.WinstonLoggerAdapter, { jsonLogs
: jsonLogs, logsFolder: logsFolder, verbose: verbose, logLevel: logLevel, silent: silent });
var loggerController = new _LoggerController.LoggerController(loggerControllerAdapter, appId);
logging.<span class="apidocCodeKeywordSpan">setLogger</span>(loggerController);

var filesControllerAdapter = (0, _AdapterLoader.loadAdapter)(filesAdapter, function () {
  return new _GridStoreAdapter.GridStoreAdapter(databaseURI);
});
var filesController = new _FilesController.FilesController(filesControllerAdapter, appId);

var pushOptions = Object.assign({}, push);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.middlewares" id="apidoc.module.parse-server.middlewares">module parse-server.middlewares</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.middlewares.allowCrossDomain" id="apidoc.element.parse-server.middlewares.allowCrossDomain">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>allowCrossDomain
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function allowCrossDomain(req, res, next) {
  res.header(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;);
  res.header(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;GET,PUT,POST,DELETE,OPTIONS&#x27;);
  res.header(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;X-Parse-Master-Key, X-Parse-REST-API-Key, X-Parse-Javascript-Key, X-Parse-Application
-Id, X-Parse-Client-Version, X-Parse-Session-Token, X-Requested-With, X-Parse-Revocable-Session, Content-Type&#x27;);

  // intercept OPTIONS method
  if (&#x27;OPTIONS&#x27; == req.method) {
    res.sendStatus(200);
  } else {
    next();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.middlewares.allowMethodOverride" id="apidoc.element.parse-server.middlewares.allowMethodOverride">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>allowMethodOverride
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function allowMethodOverride(req, res, next) {
  if (req.method === &#x27;POST&#x27; &#x26;&#x26; req.body._method) {
    req.originalMethod = req.method;
    req.method = req.body._method;
    delete req.body._method;
  }
  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.middlewares.enforceMasterKeyAccess" id="apidoc.element.parse-server.middlewares.enforceMasterKeyAccess">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>enforceMasterKeyAccess
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function enforceMasterKeyAccess(req, res, next) {
  if (!req.auth.isMaster) {
    res.status(403);
    res.end(&#x27;{&#x22;error&#x22;:&#x22;unauthorized: master key is required&#x22;}&#x27;);
    return;
  }
  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.middlewares.handleParseErrors" id="apidoc.element.parse-server.middlewares.handleParseErrors">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>handleParseErrors
        <span class="apidocSignatureSpan">(err, req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function handleParseErrors(err, req, res, next) {
  if (err instanceof _node2.default.Error) {
    var httpStatus = void 0;
    // TODO: fill out this mapping
    switch (err.code) {
      case _node2.default.Error.INTERNAL_SERVER_ERROR:
        httpStatus = 500;
        break;
      case _node2.default.Error.OBJECT_NOT_FOUND:
        httpStatus = 404;
        break;
      default:
        httpStatus = 400;
    }

    res.status(httpStatus);
    res.json({ code: err.code, error: err.message });
    _logger2.default.error(err.message, err);
  } else if (err.status &#x26;&#x26; err.message) {
    res.status(err.status);
    res.json({ error: err.message });
    next(err);
  } else {
    _logger2.default.error(&#x27;Uncaught internal server error.&#x27;, err, err.stack);
    res.status(500);
    res.json({
      code: _node2.default.Error.INTERNAL_SERVER_ERROR,
      message: &#x27;Internal server error.&#x27;
    });
    next(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.middlewares.handleParseHeaders" id="apidoc.element.parse-server.middlewares.handleParseHeaders">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>handleParseHeaders
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function handleParseHeaders(req, res, next) {
  var mountPathLength = req.originalUrl.length - req.url.length;
  var mountPath = req.originalUrl.slice(0, mountPathLength);
  var mount = req.protocol + &#x27;://&#x27; + req.get(&#x27;host&#x27;) + mountPath;

  var info = {
    appId: req.get(&#x27;X-Parse-Application-Id&#x27;),
    sessionToken: req.get(&#x27;X-Parse-Session-Token&#x27;),
    masterKey: req.get(&#x27;X-Parse-Master-Key&#x27;),
    installationId: req.get(&#x27;X-Parse-Installation-Id&#x27;),
    clientKey: req.get(&#x27;X-Parse-Client-Key&#x27;),
    javascriptKey: req.get(&#x27;X-Parse-Javascript-Key&#x27;),
    dotNetKey: req.get(&#x27;X-Parse-Windows-Key&#x27;),
    restAPIKey: req.get(&#x27;X-Parse-REST-API-Key&#x27;),
    clientVersion: req.get(&#x27;X-Parse-Client-Version&#x27;)
  };

  var basicAuth = httpAuth(req);

  if (basicAuth) {
    var basicAuthAppId = basicAuth.appId;
    if (_cache2.default.get(basicAuthAppId)) {
      info.appId = basicAuthAppId;
      info.masterKey = basicAuth.masterKey || info.masterKey;
      info.javascriptKey = basicAuth.javascriptKey || info.javascriptKey;
    }
  }

  if (req.body) {
    // Unity SDK sends a _noBody key which needs to be removed.
    // Unclear at this point if action needs to be taken.
    delete req.body._noBody;
  }

  var fileViaJSON = false;

  if (!info.appId || !_cache2.default.get(info.appId)) {
    // See if we can find the app id on the body.
    if (req.body instanceof Buffer) {
      // The only chance to find the app id is if this is a file
      // upload that actually is a JSON body. So try to parse it.
      req.body = JSON.parse(req.body);
      fileViaJSON = true;
    }

    if (req.body) {
      delete req.body._RevocableSession;
    }

    if (req.body &#x26;&#x26; req.body._ApplicationId &#x26;&#x26; _cache2.default.get(req.body._ApplicationId) &#x26;&#x26; (!info.masterKey || _cache2.default
.get(req.body._ApplicationId).masterKey === info.masterKey)) {
      info.appId = req.body._ApplicationId;
      info.javascriptKey = req.body._JavaScriptKey || &#x27;&#x27;;
      delete req.body._ApplicationId;
      delete req.body._JavaScriptKey;
      // TODO: test that the REST API formats generated by the other
      // SDKs are handled ok
      if (req.body._ClientVersion) {
        info.clientVersion = req.body._ClientVersion;
        delete req.body._ClientVersion;
      }
      if (req.body._InstallationId) {
        info.installationId = req.body._InstallationId;
        delete req.body._InstallationId;
      }
      if (req.body._SessionToken) {
        info.sessionToken = req.body._SessionToken;
        delete req.body._SessionToken;
      }
      if (req.body._MasterKey) {
        info.masterKey = req.body._MasterKey;
        delete req.body._MasterKey;
      }
      if (req.body._ContentType) {
        req.headers[&#x27;content-type&#x27;] = req.body._ContentType;
        delete req.body._ContentType;
      }
    } else {
      return invalidRequest(req, res);
    }
  }

  if (info.clientVersion) {
    info.clientSDK = _ClientSDK2.default.fromString(info.clientVersion);
  }

  if (fileViaJSON) {
    // We need to repopulate req.body with a buffer
    var base64 = req.body.base64;
    req.body = new Buffer(base64, &#x27;base64&#x27;);
  }

  info.app = _cache2.default.get(info.appId);
  req.config = new _Config2.default(info.appId, mount);
  req.info = info;

  var isMaster = info.masterKey === req.config.masterKey;

  if (isMaster) {
    req.auth = new _Auth2.default.Auth({ config: req.config, installationId: info.installationId, isMaster: true });
    next();
    return;
  }

  // Client keys are not required in parse-server, but if any have been configured in the server, validate them
  //  to preserve original behavior.
  var keys = [&#x22;clientKey&#x22;, &#x22;javascriptKey&#x22;, &#x22;dotNetKey&#x22;, &#x22;restAPIKey&#x22;];
  var oneKeyConfigured = keys.some(function (key) {
    return req.config[key] !== undefined;
  });
  var oneKeyMatches = keys.some(function (key) {
    return req.config[key] !== undefined &#x26;&#x26; info[key] === req.config[key];
  });

  if (oneKeyConfigured &#x26;&#x26; !oneKeyMatches) {
    return invalidRequest(req, res);
  }

  if (req.url == &#x22;/login&#x22;) {
    delete info.sessionToken;
  }

  if (!info.sessionT ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.middlewares.promiseEnforceMasterKeyAccess" id="apidoc.element.parse-server.middlewares.promiseEnforceMasterKeyAccess">
        function <span class="apidocSignatureSpan">parse-server.middlewares.</span>promiseEnforceMasterKeyAccess
        <span class="apidocSignatureSpan">(request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function promiseEnforceMasterKeyAccess(request) {
  if (!request.auth.isMaster) {
    var error = new Error();
    error.status = 403;
    error.message = &#x22;unauthorized: master key is required&#x22;;
    throw error;
  }
  return Promise.resolve();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.password" id="apidoc.module.parse-server.password">module parse-server.password</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.password.compare" id="apidoc.element.parse-server.password.compare">
        function <span class="apidocSignatureSpan">parse-server.password.</span>compare
        <span class="apidocSignatureSpan">(password, hashedPassword)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function compare(password, hashedPassword) {
  return new Promise(function (fulfill, reject) {
    // Cannot bcrypt compare when one is undefined
    if (!password || !hashedPassword) {
      return fulfill(false);
    }
    bcrypt.compare(password, hashedPassword, function (err, success) {
      if (err) {
        reject(err);
      } else {
        fulfill(success);
      }
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var user = results[0];
var oldPasswords = [];
if (user._password_history) oldPasswords = _lodash2.default.take(user._password_history, _this11.config.passwordPolicy.maxPasswordHistory
 - 1);
oldPasswords.push(user.password);
var newPassword = _this11.data.password;
// compare the new password hash with all old password hashes
var promises = oldPasswords.map(function (hash) {
  return passwordCrypto.<span class="apidocCodeKeywordSpan">compare</span>(newPassword, hash).then(function (result) {
    if (result) // reject if there is a match
      return Promise.reject(&#x22;REPEAT_PASSWORD&#x22;);
    return Promise.resolve();
  });
});
// wait for all comparisons to complete
return Promise.all(promises).then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.password.hash" id="apidoc.element.parse-server.password.hash">
        function <span class="apidocSignatureSpan">parse-server.password.</span>hash
        <span class="apidocSignatureSpan">(password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hash(password) {
  return new Promise(function (fulfill, reject) {
    bcrypt.hash(password, 10, function (err, hashedPassword) {
      if (err) {
        reject(err);
      } else {
        fulfill(hashedPassword);
      }
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (_this7.query &#x26;&#x26; !_this7.auth.isMaster) {
    _this7.storage[&#x27;clearSessions&#x27;] = true;
    _this7.storage[&#x27;generateNewSession&#x27;] = true;
  }

  return _this7._validatePasswordPolicy().then(function () {
    return passwordCrypto.<span class="apidocCodeKeywordSpan">hash</span>(_this7.data.password).then(function (hashedPassword) {
      _this7.data._hashed_password = hashedPassword;
      delete _this7.data.password;
    });
  });
}).then(function () {
  return _this7._validateUserName();
}).then(function () {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.requiredParameter" id="apidoc.module.parse-server.requiredParameter">module parse-server.requiredParameter</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.requiredParameter.default" id="apidoc.element.parse-server.requiredParameter.default">
        function <span class="apidocSignatureSpan">parse-server.requiredParameter.</span>default
        <span class="apidocSignatureSpan">(errorMessage)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">default = function (errorMessage) {
  throw errorMessage;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.webhookKey = cacheInfo.webhookKey;
this.fileKey = cacheInfo.fileKey;
this.allowClientClassCreation = cacheInfo.allowClientClassCreation;
this.userSensitiveFields = cacheInfo.userSensitiveFields;

// Create a new DatabaseController per request
if (cacheInfo.databaseController) {
  var schemaCache = new _SchemaCache2.<span class="apidocCodeKeywordSpan">default</span>(cacheInfo.cacheController, cacheInfo.schemaCacheTTL
, cacheInfo.enableSingleSchemaCache);
  this.database = new _DatabaseController2.default(cacheInfo.databaseController.adapter, schemaCache);
}

this.schemaCacheTTL = cacheInfo.schemaCacheTTL;
this.enableSingleSchemaCache = cacheInfo.enableSingleSchemaCache;

this.serverURL = cacheInfo.serverURL;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.rest" id="apidoc.module.parse-server.rest">module parse-server.rest</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.rest.create" id="apidoc.element.parse-server.rest.create">
        function <span class="apidocSignatureSpan">parse-server.rest.</span>create
        <span class="apidocSignatureSpan">(config, auth, className, restObject, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function create(config, auth, className, restObject, clientSDK) {
  enforceRoleSecurity(&#x27;create&#x27;, className, auth);
  var write = new RestWrite(config, auth, className, null, restObject, null, clientSDK);
  return write.execute();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// password timestamp to be used when password expiry policy is enforced
if (this.config.passwordPolicy &#x26;&#x26; this.config.passwordPolicy.maxPasswordAge) {
  this.data._password_changed_at = Parse._encode(new Date());
}
    }

    // Run a create
    return this.config.database.<span class="apidocCodeKeywordSpan">create</span>(this.className, this.data, this.runOptions).catch
(function (error) {
if (_this14.className !== &#x27;_User&#x27; || error.code !== Parse.Error.DUPLICATE_VALUE) {
  throw error;
}
// If this was a failed user creation due to username or email already taken, we need to
// check whether it was username or email and return the appropriate error.

// TODO: See if we can later do this without additional queries by using named indexes.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.rest.del" id="apidoc.element.parse-server.rest.del">
        function <span class="apidocSignatureSpan">parse-server.rest.</span>del
        <span class="apidocSignatureSpan">(config, auth, className, objectId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function del(config, auth, className, objectId) {
  if (typeof objectId !== &#x27;string&#x27;) {
    throw new Parse.Error(Parse.Error.INVALID_JSON, &#x27;bad objectId&#x27;);
  }

  if (className === &#x27;_User&#x27; &#x26;&#x26; !auth.couldUpdateUserId(objectId)) {
    throw new Parse.Error(Parse.Error.SESSION_MISSING, &#x27;insufficient auth to delete user&#x27;);
  }

  enforceRoleSecurity(&#x27;delete&#x27;, className, auth);

  var inflatedObject;

  return Promise.resolve().then(function () {
    var hasTriggers = checkTriggers(className, config, [&#x27;beforeDelete&#x27;, &#x27;afterDelete&#x27;]);
    var hasLiveQuery = checkLiveQuery(className, config);
    if (hasTriggers || hasLiveQuery || className == &#x27;_Session&#x27;) {
      return find(config, _Auth2.default.master(config), className, { objectId: objectId }).then(function (response) {
        if (response &#x26;&#x26; response.results &#x26;&#x26; response.results.length) {
          response.results[0].className = className;

          var cacheAdapter = config.cacheController;
          cacheAdapter.user.del(response.results[0].sessionToken);
          inflatedObject = Parse.Object.fromJSON(response.results[0]);
          // Notify LiveQuery server if possible
          config.liveQueryController.onAfterDelete(inflatedObject.className, inflatedObject);
          return triggers.maybeRunTrigger(triggers.Types.beforeDelete, auth, inflatedObject, null, config);
        }
        throw new Parse.Error(Parse.Error.OBJECT_NOT_FOUND, &#x27;Object not found for delete.&#x27;);
      });
    }
    return Promise.resolve({});
  }).then(function () {
    if (!auth.isMaster) {
      return auth.getUserRoles();
    } else {
      return;
    }
  }).then(function () {
    var options = {};
    if (!auth.isMaster) {
      options.acl = [&#x27;*&#x27;];
      if (auth.user) {
        options.acl.push(auth.user.id);
        options.acl = options.acl.concat(auth.userRoles);
      }
    }

    return config.database.destroy(className, {
      objectId: objectId
    }, options);
  }).then(function () {
    return triggers.maybeRunTrigger(triggers.Types.afterDelete, auth, inflatedObject, null, config);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    user: {
      __type: &#x22;Pointer&#x22;,
      className: &#x22;_User&#x22;,
      objectId: this.objectId()
    }
  }).execute().then(function (results) {
    results.results.forEach(function (session) {
      return _this7.config.cacheController.user.<span class="apidocCodeKeywordSpan">del</span>(session.sessionToken);
    });
  });
}

return promise.then(function () {
  // Transform the password
  if (_this7.data.password === undefined) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.rest.find" id="apidoc.element.parse-server.rest.find">
        function <span class="apidocSignatureSpan">parse-server.rest.</span>find
        <span class="apidocSignatureSpan">(config, auth, className, restWhere, restOptions, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function find(config, auth, className, restWhere, restOptions, clientSDK) {
  enforceRoleSecurity(&#x27;find&#x27;, className, auth);
  return triggers.maybeRunQueryTrigger(triggers.Types.beforeFind, className, restWhere, restOptions, config, auth).then(function
 (result) {
    restWhere = result.restWhere || restWhere;
    restOptions = result.restOptions || restOptions;
    var query = new RestQuery(config, auth, className, restWhere, restOptions, clientSDK);
    return query.execute();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

      return new Promise(function (resolve, reject) {
var query = {
  username: _this._user.username,
  _failed_login_count: { $exists: true }
};

_this._config.database.<span class="apidocCodeKeywordSpan">find</span>(&#x27;_User&#x27;, query).then(function (users) {
  if (Array.isArray(users) &#x26;&#x26; users.length &#x3e; 0) {
    resolve(true);
  } else {
    resolve(false);
  }
}).catch(function (err) {
  reject(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.rest.get" id="apidoc.element.parse-server.rest.get">
        function <span class="apidocSignatureSpan">parse-server.rest.</span>get
        <span class="apidocSignatureSpan">(config, auth, className, objectId, restOptions, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function get(config, auth, className, objectId, restOptions, clientSDK) {
  enforceRoleSecurity(&#x27;get&#x27;, className, auth);
  var query = new RestQuery(config, auth, className, { objectId: objectId }, restOptions, clientSDK);
  return query.execute();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Returns a promise that resolves to an Auth object
var getAuthForSessionToken = function getAuthForSessionToken() {
  var _ref2 = arguments.length &#x3e; 0 &#x26;&#x26; arguments[0] !== undefined ? arguments[0] : {},
  config = _ref2.config,
  sessionToken = _ref2.sessionToken,
  installationId = _ref2.installationId;

  return config.cacheController.user.<span class="apidocCodeKeywordSpan">get</span>(sessionToken).then(function (userJSON) {
if (userJSON) {
  var cachedUser = Parse.Object.fromJSON(userJSON);
  return Promise.resolve(new Auth({ config: config, isMaster: false, installationId: installationId, user: cachedUser }));
}

var restOptions = {
  limit: 1,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.rest.update" id="apidoc.element.parse-server.rest.update">
        function <span class="apidocSignatureSpan">parse-server.rest.</span>update
        <span class="apidocSignatureSpan">(config, auth, className, objectId, restObject, clientSDK)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function update(config, auth, className, objectId, restObject, clientSDK) {
  enforceRoleSecurity(&#x27;update&#x27;, className, auth);

  return Promise.resolve().then(function () {
    var hasTriggers = checkTriggers(className, config, [&#x27;beforeSave&#x27;, &#x27;afterSave&#x27;]);
    var hasLiveQuery = checkLiveQuery(className, config);
    if (hasTriggers || hasLiveQuery) {
      return find(config, _Auth2.default.master(config), className, { objectId: objectId });
    }
    return Promise.resolve({});
  }).then(function (response) {
    var originalRestObject;
    if (response &#x26;&#x26; response.results &#x26;&#x26; response.results.length) {
      originalRestObject = response.results[0];
    }

    var write = new RestWrite(config, auth, className, { objectId: objectId }, restObject, originalRestObject, clientSDK);
    return write.execute();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      username: this._user.username
    };

    var updateFields = {
      _failed_login_count: value
    };

    return this._config.database.<span class="apidocCodeKeywordSpan">update</span>(&#x27;_User&#x27;, query, updateFields);
  }

  /**
   * check if the _failed_login_count field has been set
   */

}, {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-server.triggers" id="apidoc.module.parse-server.triggers">module parse-server.triggers</a></h1>


    <h2>
        <a href="#apidoc.element.parse-server.triggers._unregister" id="apidoc.element.parse-server.triggers._unregister">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>_unregister
        <span class="apidocSignatureSpan">(appId, category, className, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _unregister(appId, category, className, type) {
  if (type) {
    removeTrigger(className, type, appId);
    delete _triggerStore[appId][category][className][type];
  } else {
    delete _triggerStore[appId][category][className];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers._unregisterAll" id="apidoc.element.parse-server.triggers._unregisterAll">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>_unregisterAll
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _unregisterAll() {
  Object.keys(_triggerStore).forEach(function (appId) {
    return delete _triggerStore[appId];
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.addFunction" id="apidoc.element.parse-server.triggers.addFunction">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>addFunction
        <span class="apidocSignatureSpan">(functionName, handler, validationHandler, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addFunction(functionName, handler, validationHandler, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  _triggerStore[applicationId] = _triggerStore[applicationId] || baseStore();
  _triggerStore[applicationId].Functions[functionName] = handler;
  _triggerStore[applicationId].Validators[functionName] = validationHandler;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.addJob" id="apidoc.element.parse-server.triggers.addJob">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>addJob
        <span class="apidocSignatureSpan">(jobName, handler, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addJob(jobName, handler, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  _triggerStore[applicationId] = _triggerStore[applicationId] || baseStore();
  _triggerStore[applicationId].Jobs[jobName] = handler;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.addTrigger" id="apidoc.element.parse-server.triggers.addTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>addTrigger
        <span class="apidocSignatureSpan">(type, className, handler, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function addTrigger(type, className, handler, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  _triggerStore[applicationId] = _triggerStore[applicationId] || baseStore();
  _triggerStore[applicationId].Triggers[type][className] = handler;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getFunction" id="apidoc.element.parse-server.triggers.getFunction">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getFunction
        <span class="apidocSignatureSpan">(functionName, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getFunction(functionName, applicationId) {
  var manager = _triggerStore[applicationId];
  if (manager &#x26;&#x26; manager.Functions) {
    return manager.Functions[functionName];
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getJob" id="apidoc.element.parse-server.triggers.getJob">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getJob
        <span class="apidocSignatureSpan">(jobName, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getJob(jobName, applicationId) {
  var manager = _triggerStore[applicationId];
  if (manager &#x26;&#x26; manager.Jobs) {
    return manager.Jobs[jobName];
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getJobs" id="apidoc.element.parse-server.triggers.getJobs">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getJobs
        <span class="apidocSignatureSpan">(applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getJobs(applicationId) {
  var manager = _triggerStore[applicationId];
  if (manager &#x26;&#x26; manager.Jobs) {
    return manager.Jobs;
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getRequestObject" id="apidoc.element.parse-server.triggers.getRequestObject">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getRequestObject
        <span class="apidocSignatureSpan">(triggerType, auth, parseObject, originalParseObject, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getRequestObject(triggerType, auth, parseObject, originalParseObject, config) {
  var request = {
    triggerName: triggerType,
    object: parseObject,
    master: false,
    log: config.loggerController
  };

  if (originalParseObject) {
    request.original = originalParseObject;
  }

  if (!auth) {
    return request;
  }
  if (auth.isMaster) {
    request[&#x27;master&#x27;] = true;
  }
  if (auth.user) {
    request[&#x27;user&#x27;] = auth.user;
  }
  if (auth.installationId) {
    request[&#x27;installationId&#x27;] = auth.installationId;
  }
  return request;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getRequestQueryObject" id="apidoc.element.parse-server.triggers.getRequestQueryObject">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getRequestQueryObject
        <span class="apidocSignatureSpan">(triggerType, auth, query, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getRequestQueryObject(triggerType, auth, query, config) {
  var request = {
    triggerName: triggerType,
    query: query,
    master: false,
    log: config.loggerController
  };

  if (!auth) {
    return request;
  }
  if (auth.isMaster) {
    request[&#x27;master&#x27;] = true;
  }
  if (auth.user) {
    request[&#x27;user&#x27;] = auth.user;
  }
  if (auth.installationId) {
    request[&#x27;installationId&#x27;] = auth.installationId;
  }
  return request;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getResponseObject" id="apidoc.element.parse-server.triggers.getResponseObject">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getResponseObject
        <span class="apidocSignatureSpan">(request, resolve, reject)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getResponseObject(request, resolve, reject) {
  return {
    success: function success(response) {
      if (request.triggerName === Types.afterFind) {
        if (!response) {
          response = request.objects;
        }
        response = response.map(function (object) {
          return object.toJSON();
        });
        return resolve(response);
      }
      // Use the JSON response
      if (response &#x26;&#x26; !request.object.equals(response) &#x26;&#x26; request.triggerName === Types.beforeSave) {
        return resolve(response);
      }
      response = {};
      if (request.triggerName === Types.beforeSave) {
        response[&#x27;object&#x27;] = request.object._getSaveJSON();
      }
      return resolve(response);
    },
    error: function error(code, message) {
      if (!message) {
        message = code;
        code = _node2.default.Error.SCRIPT_FAILED;
      }
      var scriptError = new _node2.default.Error(code, message);
      return reject(scriptError);
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getTrigger" id="apidoc.element.parse-server.triggers.getTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getTrigger
        <span class="apidocSignatureSpan">(className, triggerType, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getTrigger(className, triggerType, applicationId) {
  if (!applicationId) {
    throw &#x22;Missing ApplicationID&#x22;;
  }
  var manager = _triggerStore[applicationId];
  if (manager &#x26;&#x26; manager.Triggers &#x26;&#x26; manager.Triggers[triggerType] &#x26;&#x26; manager.Triggers[triggerType][className]) {
    return manager.Triggers[triggerType][className];
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var RestQuery = require(&#x27;./RestQuery&#x27;);
var RestWrite = require(&#x27;./RestWrite&#x27;);
var triggers = require(&#x27;./triggers&#x27;);

function checkTriggers(className, config, types) {
  return types.some(function (triggerType) {
    return triggers.<span class="apidocCodeKeywordSpan">getTrigger</span>(className, triggers.Types[triggerType], config.applicationId
);
  });
}

function checkLiveQuery(className, config) {
  return config.liveQueryController &#x26;&#x26; config.liveQueryController.hasLiveQuery(className);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.getValidator" id="apidoc.element.parse-server.triggers.getValidator">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>getValidator
        <span class="apidocSignatureSpan">(functionName, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getValidator(functionName, applicationId) {
  var manager = _triggerStore[applicationId];
  if (manager &#x26;&#x26; manager.Validators) {
    return manager.Validators[functionName];
  }
  return undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.inflate" id="apidoc.element.parse-server.triggers.inflate">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>inflate
        <span class="apidocSignatureSpan">(data, restObject)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inflate(data, restObject) {
  var copy = (typeof data === &#x27;undefined&#x27; ? &#x27;undefined&#x27; : _typeof(data)) == &#x27;object&#x27; ? data : { className: data };
  for (var key in restObject) {
    copy[key] = restObject[key];
  }
  return _node2.default.Object.fromJSON(copy);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Cloud code gets a bit of extra data for its objects
var extraData = { className: this.className };
if (this.query &#x26;&#x26; this.query.objectId) {
  extraData.objectId = this.query.objectId;
}

var originalObject = null;
var updatedObject = triggers.<span class="apidocCodeKeywordSpan">inflate</span>(extraData, this.originalData);
if (this.query &#x26;&#x26; this.query.objectId) {
  // This is an update for existing object.
  originalObject = triggers.inflate(extraData, this.originalData);
}
updatedObject.set(this.sanitizedData());

return Promise.resolve().then(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.maybeRunAfterFindTrigger" id="apidoc.element.parse-server.triggers.maybeRunAfterFindTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunAfterFindTrigger
        <span class="apidocSignatureSpan">(triggerType, auth, className, objects, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function maybeRunAfterFindTrigger(triggerType, auth, className, objects, config) {
  return new Promise(function (resolve, reject) {
    var trigger = getTrigger(className, triggerType, config.applicationId);
    if (!trigger) {
      return resolve();
    }
    var request = getRequestObject(triggerType, auth, null, null, config);
    var response = getResponseObject(request, function (object) {
      resolve(object);
    }, function (error) {
      reject(error);
    });
    logTriggerSuccessBeforeHook(triggerType, className, &#x27;AfterFind&#x27;, JSON.stringify(objects), auth);
    request.objects = objects.map(function (object) {
      //setting the class name to transform into parse object
      object.className = className;
      return _node2.default.Object.fromJSON(object);
    });
    var triggerPromise = trigger(request, response);
    if (triggerPromise &#x26;&#x26; typeof triggerPromise.then === &#x22;function&#x22;) {
      return triggerPromise.then(function (promiseResults) {
        if (promiseResults) {
          resolve(promiseResults);
        } else {
          return reject(new _node2.default.Error(_node2.default.Error.SCRIPT_FAILED, &#x22;AfterFind expect results to be returned in
 the promise&#x22;));
        }
      });
    }
  }).then(function (results) {
    logTriggerAfterHook(triggerType, className, JSON.stringify(results), auth);
    return results;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  // Avoid doing any setup for triggers if there is no &#x27;afterFind&#x27; trigger for this class.
  var hasAfterFindHook = triggers.triggerExists(this.className, triggers.Types.afterFind, this.config.applicationId);
  if (!hasAfterFindHook) {
    return Promise.resolve();
  }
  // Run afterFind trigger and set the new results
  return triggers.<span class="apidocCodeKeywordSpan">maybeRunAfterFindTrigger</span>(triggers.Types.afterFind, this.auth, this.
className, this.response.results, this.config).then(function (results) {
    _this13.response.results = results;
  });
};

// Adds included values to the response.
// Path is a list of field names.
// Returns a promise for an augmented response.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.maybeRunQueryTrigger" id="apidoc.element.parse-server.triggers.maybeRunQueryTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunQueryTrigger
        <span class="apidocSignatureSpan">(triggerType, className, restWhere, restOptions, config, auth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function maybeRunQueryTrigger(triggerType, className, restWhere, restOptions, config, auth) {
  var trigger = getTrigger(className, triggerType, config.applicationId);
  if (!trigger) {
    return Promise.resolve({
      restWhere: restWhere,
      restOptions: restOptions
    });
  }

  var parseQuery = new _node2.default.Query(className);
  if (restWhere) {
    parseQuery._where = restWhere;
  }
  if (restOptions) {
    if (restOptions.include &#x26;&#x26; restOptions.include.length &#x3e; 0) {
      parseQuery._include = restOptions.include.split(&#x27;,&#x27;);
    }
    if (restOptions.skip) {
      parseQuery._skip = restOptions.skip;
    }
    if (restOptions.limit) {
      parseQuery._limit = restOptions.limit;
    }
  }
  var requestObject = getRequestQueryObject(triggerType, auth, parseQuery, config);
  return Promise.resolve().then(function () {
    return trigger(requestObject);
  }).then(function (result) {
    var queryResult = parseQuery;
    if (result &#x26;&#x26; result instanceof _node2.default.Query) {
      queryResult = result;
    }
    var jsonQuery = queryResult.toJSON();
    if (jsonQuery.where) {
      restWhere = jsonQuery.where;
    }
    if (jsonQuery.limit) {
      restOptions = restOptions || {};
      restOptions.limit = jsonQuery.limit;
    }
    if (jsonQuery.skip) {
      restOptions = restOptions || {};
      restOptions.skip = jsonQuery.skip;
    }
    if (jsonQuery.include) {
      restOptions = restOptions || {};
      restOptions.include = jsonQuery.include;
    }
    if (jsonQuery.keys) {
      restOptions = restOptions || {};
      restOptions.keys = jsonQuery.keys;
    }
    return {
      restWhere: restWhere,
      restOptions: restOptions
    };
  }, function (err) {
    if (typeof err === &#x27;string&#x27;) {
      throw new _node2.default.Error(1, err);
    } else {
      throw err;
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function checkLiveQuery(className, config) {
  return config.liveQueryController &#x26;&#x26; config.liveQueryController.hasLiveQuery(className);
}

// Returns a promise for an object with optional keys &#x27;results&#x27; and &#x27;count&#x27;.
function find(config, auth, className, restWhere, restOptions, clientSDK) {
  enforceRoleSecurity(&#x27;find&#x27;, className, auth);
  return triggers.<span class="apidocCodeKeywordSpan">maybeRunQueryTrigger</span>(triggers.Types.beforeFind, className, restWhere
, restOptions, config, auth).then(function (result) {
    restWhere = result.restWhere || restWhere;
    restOptions = result.restOptions || restOptions;
    var query = new RestQuery(config, auth, className, restWhere, restOptions, clientSDK);
    return query.execute();
  });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.maybeRunTrigger" id="apidoc.element.parse-server.triggers.maybeRunTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>maybeRunTrigger
        <span class="apidocSignatureSpan">(triggerType, auth, parseObject, originalParseObject, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function maybeRunTrigger(triggerType, auth, parseObject, originalParseObject, config) {
  if (!parseObject) {
    return Promise.resolve({});
  }
  return new Promise(function (resolve, reject) {
    var trigger = getTrigger(parseObject.className, triggerType, config.applicationId);
    if (!trigger) return resolve();
    var request = getRequestObject(triggerType, auth, parseObject, originalParseObject, config);
    var response = getResponseObject(request, function (object) {
      logTriggerSuccessBeforeHook(triggerType, parseObject.className, parseObject.toJSON(), object, auth);
      resolve(object);
    }, function (error) {
      logTriggerErrorBeforeHook(triggerType, parseObject.className, parseObject.toJSON(), auth, error);
      reject(error);
    });
    // Force the current Parse app before the trigger
    _node2.default.applicationId = config.applicationId;
    _node2.default.javascriptKey = config.javascriptKey || &#x27;&#x27;;
    _node2.default.masterKey = config.masterKey;

    // AfterSave and afterDelete triggers can return a promise, which if they
    // do, needs to be resolved before this promise is resolved,
    // so trigger execution is synced with RestWrite.execute() call.
    // If triggers do not return a promise, they can run async code parallel
    // to the RestWrite.execute() call.
    var triggerPromise = trigger(request, response);
    if (triggerType === Types.afterSave || triggerType === Types.afterDelete) {
      logTriggerAfterHook(triggerType, parseObject.className, parseObject.toJSON(), auth);
      if (triggerPromise &#x26;&#x26; typeof triggerPromise.then === &#x22;function&#x22;) {
        return triggerPromise.then(resolve, resolve);
      } else {
        return resolve();
      }
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this.query &#x26;&#x26; this.query.objectId) {
  // This is an update for existing object.
  originalObject = triggers.inflate(extraData, this.originalData);
}
updatedObject.set(this.sanitizedData());

return Promise.resolve().then(function () {
  return triggers.<span class="apidocCodeKeywordSpan">maybeRunTrigger</span>(triggers.Types.beforeSave, _this4.auth, updatedObject
, originalObject, _this4.config);
}).then(function (response) {
  if (response &#x26;&#x26; response.object) {
    _this4.storage.fieldsChangedByTrigger = _lodash2.default.reduce(response.object, function (result, value, key) {
      if (!_lodash2.default.isEqual(_this4.data[key], value)) {
        result.push(key);
      }
      return result;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.removeFunction" id="apidoc.element.parse-server.triggers.removeFunction">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeFunction
        <span class="apidocSignatureSpan">(functionName, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeFunction(functionName, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  delete _triggerStore[applicationId].Functions[functionName];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.removeJob" id="apidoc.element.parse-server.triggers.removeJob">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeJob
        <span class="apidocSignatureSpan">(jobName, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeJob(jobName, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  delete _triggerStore[applicationId].Jobs[jobName];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.removeTrigger" id="apidoc.element.parse-server.triggers.removeTrigger">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>removeTrigger
        <span class="apidocSignatureSpan">(type, className, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function removeTrigger(type, className, applicationId) {
  applicationId = applicationId || _node2.default.applicationId;
  delete _triggerStore[applicationId].Triggers[type][className];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.parse-server.triggers.triggerExists" id="apidoc.element.parse-server.triggers.triggerExists">
        function <span class="apidocSignatureSpan">parse-server.triggers.</span>triggerExists
        <span class="apidocSignatureSpan">(className, type, applicationId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function triggerExists(className, type, applicationId) {
  return getTrigger(className, type, applicationId) != undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RestQuery.prototype.runAfterFindTrigger = function () {
var _this13 = this;

if (!this.response) {
  return;
}
// Avoid doing any setup for triggers if there is no &#x27;afterFind&#x27; trigger for this class.
var hasAfterFindHook = triggers.<span class="apidocCodeKeywordSpan">triggerExists</span>(this.className, triggers.Types.afterFind
, this.config.applicationId);
if (!hasAfterFindHook) {
  return Promise.resolve();
}
// Run afterFind trigger and set the new results
return triggers.maybeRunAfterFindTrigger(triggers.Types.afterFind, this.auth, this.className, this.response.results, this.config
).then(function (results) {
  _this13.response.results = results;
});
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
